---
title: æ·±å…¥æµ…å‡º GIF
date: 2023-09-12 13:41:00
author: yuanyxh
imageUrl: https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/5fb84fd5087780ea.webp
description: æœ¬æ–‡æ·±å…¥æ¢è®¨äº† gif ç¼–è§£ç çš„åŸç†ä¸æŠ€æœ¯ã€‚æ¶µç›–äº† gif æ–‡ä»¶çš„æ ¼å¼ã€å‹ç¼©ç®—æ³•ã€å…«å‰æ ‘é¢œè‰²é‡åŒ–å’Œå­—å…¸æ ‘ç­‰å…³é”®å†…å®¹ã€‚é€šè¿‡è¿™äº›çŸ¥è¯†ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†è§†é¢‘è½¬ gifã€å›¾ç‰‡è½¬ gif å’Œ gif æ’­æ”¾å™¨ç­‰åŠŸèƒ½ã€‚æ— è®ºæ˜¯ä»ç†è®ºè¿˜æ˜¯å®è·µè§’åº¦ï¼Œæœ¬æ–‡éƒ½å°†ä¸ºä½ å±•ç¤º gif ç¼–è§£ç çš„ç²¾é«“ã€‚
keywords: git, compress, octree color quantization, gif player, video to gif, picture to gif
---

## å‰è¨€

æœ€è¿‘å†™æ–‡ç« æ—¶ç”¨åˆ°äº†å¤§é‡çš„ gifï¼Œéƒ½æ˜¯å½•åˆ¶è§†é¢‘ç„¶åä½¿ç”¨ä¸€äº›è§†é¢‘è½¬ gif çš„å·¥å…·ï¼Œæ‰€ä»¥å¯¹è§†é¢‘è½¬ gif çš„åŸç†äº§ç”Ÿäº†å…´è¶£ï¼Œåˆšå¥½é—²ç€æ²¡äº‹ï¼Œææ‡‚äº† gif çš„æ–‡ä»¶æ ¼å¼ä»¥åŠå¯¹åº”çš„ lzw å‹ç¼©ç®—æ³•ï¼Œå¹¶å®ç°äº†è§†é¢‘è½¬ gifã€å›¾ç‰‡è½¬ gif å’Œ gif æ’­æ”¾å™¨ï¼Œä¹Ÿå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚

æ–‡ç« å†…å®¹æ¶‰åŠ gif çš„æ–‡ä»¶æ ¼å¼ã€å›¾åƒå‹ç¼©ç®—æ³•ã€é¢œè‰²é‡åŒ–ç®—æ³•ï¼Œä»¥åŠä¸ºäº†åœ¨å›¾åƒå‹ç¼©ç®—æ³•ä¸­æ›´å¿«é€Ÿçš„æŸ¥æ‰¾è€Œä½¿ç”¨çš„å­—å…¸æ ‘ï¼Œå¹²è´§è¾ƒå¤šå†…å®¹è¾ƒé•¿ï¼Œè¯·è€å¿ƒè§‚çœ‹ã€‚

ä¹Ÿå¯ä»¥åœ¨ [gif-explorer] ä¸­è¿›è¡Œä½“éªŒã€‚

## GIF æ–‡ä»¶æ ¼å¼

gifï¼Œå³ Graphics Interchange Formatï¼Œå›¾ç‰‡äº’æ¢æ ¼å¼ï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§å‹ç¼©æ–‡æ¡£ï¼Œé€šè¿‡å°†çœŸå½©è‰²è½¬æ¢ä¸º 8 ä½è‰²å¹¶åˆ©ç”¨ lzw ç®—æ³•æ¥å®ç°å‹ç¼©ï¼Œå› ä¸ºä½“ç§¯å°æ”¯æŒåŠ¨ç”»ï¼Œæˆä¸ºåœ¨äº’è”ç½‘ä¸­å¹¿æ³›ä½¿ç”¨çš„å›¾åƒæ ¼å¼ä¹‹ä¸€ã€‚å®ƒå‘å±•è‡³ä»Šæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯ 87a å’Œ 89aï¼Œä»¥ä¸‹æ‰€æœ‰çš„å†…å®¹æè¿°éƒ½ä»¥æœ€æ–°çš„ 89a ç‰ˆæœ¬ä¸ºä¾‹ã€‚

åœ¨ [PDF è§£æ][è§£é” PDF æ–‡ä»¶ï¼šä½¿ç”¨ JavaScript å’Œ Canvas æ¸²æŸ“ PDF å†…å®¹] ä¸­æˆ‘ä»¬è¯´è¿‡ï¼Œæ‰€æœ‰æœ‰æ„ä¹‰çš„æ–‡ä»¶éƒ½æœ‰å®ƒè‡ªå·±çš„æ ¼å¼ï¼Œgif æ–‡ä»¶ä¹Ÿä¸ä¾‹å¤–ï¼Œgif ç”±ä»¥ä¸‹å—ç»„åˆä¸ºä¸€ä¸ªå®Œæˆçš„æ–‡ä»¶ (éƒ¨åˆ†å—å¯å‡ºç°å¤šæ¬¡)ï¼š

- [Header](#Header)
- [LogicScreenDescriptor](#LogicScreenDescriptor)
- [Global Color Table](#Global-Color-Table)
- [Application Extension](#Application-Extension)
- [Graphic Control Extension](#Graphic-Control-Extension)
- [Plain Text Extension](#Plain-Text-Extension)
- [Comment Extension](#Comment-Extension)
- [Image Descriptor](#Image-Descriptor)
- [Local Color Table](#Local-Color-Table)
- [Image Data](#Image-Data)
- [Trailer](#Trailer)

è¿™é‡Œæˆ‘ä»¬ä»¥ä¸‹é¢çš„ gif æ–‡ä»¶ä¸ºä¾‹æ¥è®²è§£å„ä¸ªå—çš„å®é™…æ„ä¹‰ã€‚

![ç¤ºä¾‹å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/6c9b329e24d97c4e.webp)

### Header

åœ¨æ–‡ä»¶å¤´ä¸­æ€»æ˜¯åŒ…å«ç€ magic number æ•°æ®ï¼Œæ ‡è¯†å½“å‰çš„æ–‡ä»¶ç±»å‹ï¼Œå¯¹äº gif è€Œè¨€ï¼Œå®ƒçš„å‰ä¸‰ä¸ªå­—èŠ‚æ€»æ˜¯ `0x47, 0x49, 0x46`ï¼Œè€Œåä¸‰ä¸ªå­—èŠ‚æ ‡è¯†å½“å‰ gif çš„ç‰ˆæœ¬ï¼Œå¯èƒ½æ˜¯ 87a ä¹Ÿå¯èƒ½æ˜¯ 89aï¼Œè¿™æ˜¯ header ä¸­åŒ…å«çš„å…¨éƒ¨ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾ï¼š

![æ–‡ä»¶å¤´å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/302f3fa33391f95d.webp)

### LogicScreenDescriptor

ç´§éš Header ä¹‹åçš„æ˜¯ LogicScreenDescriptorï¼Œè¿™é‡ŒåŒ…å«äº†æ•´ä¸ª gif æ–‡ä»¶çš„å…¨å±€ä¿¡æ¯ï¼Œå›ºå®š 7 ä¸ªå­—èŠ‚ï¼Œå¦‚ä¸‹å›¾ï¼š

![å…¨å±€ä¿¡æ¯çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/e4b8d54aaef9e533.webp)

å‰ 4 ä¸ªå­—èŠ‚æè¿°äº†è¿™ä¸ª gif çš„å®½é«˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ gif ä¸­ï¼Œå¤šå­—èŠ‚æ•°æ®æ˜¯ä»¥å°ç«¯å½¢å¼å­˜å‚¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ `0x40, 0x01` (å®½) å’Œ `0xc8, 0x00` (é«˜) æŒ‰äººä»¬æ‰€èƒ½æ¥å—çš„è¡¨ç¤ºåº”è¯¥æ˜¯ `0x01, 0x40` å’Œ `0x00, 0xc8`ï¼Œä¹Ÿå°±æ˜¯ 320 x 200ã€‚

ç¬¬ 5 ä¸ªå­—èŠ‚æ˜¯ä¸€ä¸ªå‹ç¼©å­—èŠ‚ï¼Œè¿™ä¸ªå­—èŠ‚ä¸­çš„ä¸åŒä½è¡¨ç¤ºäº†ä¸åŒçš„ä¿¡æ¯ï¼Œ`0xf6` å³ `11110110`ï¼Œæˆ‘ä»¬ä»å·¦è‡³å³æ¥è®²è§£å„ä¸ªä½çš„ä½œç”¨ï¼š

- 1 ä½ï¼šå…¨å±€é¢œè‰²æ ‡è¯†ï¼Œå¦‚æœå­˜åœ¨åˆ™å…¨å±€é¢œè‰²è¡¨ç´§è·Ÿåœ¨ LogicScreenDescriptor åé¢å‡ºç°ã€‚
- 2 - 4 ä½ï¼šè‰²è¡¨ä¸­æ¯ä¸ªé¢œè‰²é€šé“çš„ä½æ·±ï¼Œ`111` å³è¡¨ç¤ºæ¯ä¸ªé¢œè‰²é€šé“å…è®¸çš„æœ€å¤§å€¼ä¸º 255ï¼Œä¹Ÿå°±æ˜¯ 7 + 1 ä½æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ã€‚
- 5 ä½ï¼šæ’åºæ ‡è¯†ï¼Œæ ‡è¯†è‰²è¡¨ä¸­çš„é¢œè‰²æ˜¯å¦ç»è¿‡æ’åºï¼Œæ’åºæŒ‰é¢œè‰²å‡ºç°çš„æ¬¡æ•°ä»é«˜è‡³ä½ï¼Œä¹Ÿå°±æ˜¯è¯´è¶Šé‡è¦çš„é¢œè‰²æ’åœ¨æ›´å‰é¢ã€‚
- 6 - 8 ä½ï¼šå…¨å±€è‰²è¡¨çš„ä¸ªæ•°ï¼Œè®°ä¸º nï¼Œåˆ™é¢œè‰²ä¸ªæ•°ä¸º 2 ** (n + 1)ï¼Œç¤ºä¾‹ä¸­æ˜¯ `110`ï¼Œä¹Ÿå°±æ˜¯ 2 ** (6 + 1)ï¼Œæœ‰ 128 ä¸ªé¢œè‰²ã€‚

ç¬¬ 6 ä¸ªå­—èŠ‚æ˜¯èƒŒæ™¯è‰²åœ¨å…¨å±€è‰²è¡¨ä¸­çš„ç´¢å¼•ï¼Œå…¨å±€è‰²è¡¨å­˜åœ¨æ—¶æœ‰æ•ˆï¼Œå½“å›¾åƒä¸èƒ½å®Œå…¨å æ»¡ gif çš„å®é™…å¤§å°æ—¶ï¼Œåº”æ˜¾ç¤ºèƒŒæ™¯è‰²ã€‚

ç¬¬ 7 ä¸ªå­—èŠ‚æ˜¯æ¯ä¸ªåƒç´ çš„å®½é«˜æ¯”ï¼Œä¸€èˆ¬ä¸è®¾ç½®å®ƒã€‚

### Global-Color-Table

å…¨å±€è‰²è¡¨ï¼Œåªæœ‰å½“å…¨å±€é¢œè‰²æ ‡è¯†ä¸º 1 æ—¶æ‰å­˜åœ¨ï¼›gif ä¸­é¢œè‰²ä»¥ rgb æ ¼å¼æ’åºï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªé¢œè‰²ä¸‰å­—èŠ‚ï¼Œ128 ä¸ªé¢œè‰²åˆ™å ç”¨ 384 ä¸ªå­—èŠ‚ï¼Œå¦‚ä¸‹å›¾ï¼š

![å…¨å±€è‰²è¡¨çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/a2b2997771b78520.webp)

### Extension

åœ¨ gif ä¸­è¿˜å­˜åœ¨ç€å¾ˆå¤šæ‰©å±•å—ï¼Œè¿™äº›å—çš„æ ¼å¼éƒ½æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥åœ¨è®²è§£æ‰©å±•å—å‰æˆ‘ä»¬å…ˆæ¥äº†è§£å®ƒä»¬çš„æ ¼å¼ï¼š

```js
[0x21][flag][info]?[subdata]?[0x00]
```

- å›ºå®šå€¼ `[0x21]` æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªæ‰©å±•å—
- `[flag]` æ ‡è¯†å½“å‰æ‰©å±•å—çš„ç±»å‹
- `[info]` æ˜¯å¯é€‰çš„ï¼Œæºå¸¦äº†æ‰€éœ€çš„é¢å¤–ä¿¡æ¯ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºåç»­æœ‰å¤šå°‘ä¸ªå­—èŠ‚çš„æ•°æ®
- `[subdata]` åŒæ ·æ˜¯å¯é€‰çš„ï¼Œè¿™æ˜¯æºå¸¦çš„å®é™…æ•°æ®ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºåç»­æœ‰å¤šå°‘ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå¦‚æœè·³è¿‡è¿™äº›å­—èŠ‚åé‡åˆ°çš„å­—èŠ‚å€¼ä¸æ˜¯ `0x00`ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—èŠ‚è¡¨ç¤ºçš„ä¾ç„¶æ˜¯åç»­çš„æ•°æ®å­å—å¤§å°
- å›ºå®šå€¼ `[0x00]` è¡¨ç¤ºå—ç»“æŸ

### Comment-Extension

è¯„è®ºæ‰©å±•ï¼Œå­˜å‚¨é¢å¤–çš„æ–‡å­—æ•°æ®ã€‚è¿™äº›æ•°æ®ä¸èƒ½è¢«æ„ŸçŸ¥ï¼Œä¹Ÿå°±æ˜¯ä¸å›¾åƒæ¸²æŸ“æ— å…³ï¼Œå¤§éƒ¨åˆ†è§£æå™¨ä¼šè·³è¿‡å®ƒã€‚è¯¥æ‰©å±•å—ä»¥ `0x21, 0xfe` å¼€å§‹ï¼Œå…¶åè·Ÿæ•°æ®å­å— (subdata)ï¼›gif åªæ”¯æŒ ASCII ç è¡¨ä¸­çš„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä¸€å­—èŠ‚è¡¨ç¤ºä¸€å­—ç¬¦ï¼Œå¦‚æœé‡åˆ°ä¸èƒ½æ‰“å°çš„ ASCII å­—ç¬¦æ—¶ï¼Œgif è§„èŒƒå»ºè®®æˆ‘ä»¬ç”¨ç©ºæ ¼ (0x20) ä»£æ›¿ã€‚

è¯¥æ‰©å±•å—å»ºè®®å§‹ç»ˆåœ¨æ–‡ä»¶å¤´æˆ–æ–‡ä»¶å°¾ï¼Œä¸æ‰“æ‰°åˆ°æ›´é‡è¦çš„æ•°æ® (å›¾åƒæˆ–æ–‡æœ¬) çš„è§£æã€‚

åœ¨ç¤ºä¾‹ä¸­ï¼Œ`0x21, 0xfe` åçš„ `0xa1` è¡¨ç¤ºåç»­æœ‰ 161 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œè·³è¿‡è¿™äº›å­—èŠ‚åé‡åˆ° `0x00`ï¼Œè¡¨ç¤ºæ²¡æœ‰å…¶ä»–æ•°æ®å­å—äº†ï¼Œæ­¤å—ç»“æŸã€‚å¦‚ä¸‹å›¾ï¼š

![è¯„è®ºæ‰©å±•çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/f1671570f29ae4e0.webp)

### Graphic-Control-Extension

å›¾å½¢æ§åˆ¶æ‰©å±•ï¼Œé¡¾åæ€ä¹‰åŒ…å«äº†å¯ä»¥æ§åˆ¶å›¾å½¢å±•ç¤ºçš„ä¿¡æ¯ï¼Œå®ƒçš„ä½œç”¨èŒƒå›´æ˜¯æ­¤å—å‡ºç°åçš„ç¬¬ä¸€ä¸ª `Image` æˆ– `Plain Text Extension`ï¼Œå›ºå®š 7 å­—èŠ‚ï¼Œå…¶ä¸­ `0x21, 0xf9` å ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚å¦‚ä¸‹å›¾ï¼š

![å›¾å½¢æ§åˆ¶æ‰©å±•çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/fa884d776fcc7469.webp)

ç¬¬ 3 ä¸ªå­—èŠ‚ä¸ºå›ºå®šå€¼ `0x04`ï¼Œè¡¨ç¤ºåç»­æœ‰ 4 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå³ `[info]` æ•°æ®ã€‚

ç¬¬ 4 ä¸ªå­—èŠ‚æ˜¯ä¸€ä¸ªå‹ç¼©å­—èŠ‚ï¼Œç¤ºä¾‹ä¸­ä¸º `0x00`ï¼Œå³ `00000000`ï¼Œå„ä¸ªä½ä»å·¦åˆ°å³è¡¨ç¤ºå¦‚ä¸‹ï¼š

- 1 - 3 ä½ï¼šä¿ç•™ä½
- 4 - 6 ä½ï¼šæŒ‡ç¤ºæ’­æ”¾ä¸‹ä¸€å¸§æ—¶å½“å‰å¸§çš„æ“ä½œï¼Œæ”¯æŒ 0 - 7 çš„å€¼ï¼Œå„ä¸ªå€¼å«ä¹‰å¦‚ä¸‹
  - 0ï¼šè§£ç å™¨ä¸é‡‡å–ä»»ä½•è¡ŒåŠ¨
  - 1ï¼šä¸å¤„ç†ï¼Œä¸‹ä¸€å¸§è¦†ç›–å½“å‰å¸§
  - 2ï¼šæ’­æ”¾ä¸‹ä¸€å¸§å‰å°†å½“å‰å¸§æ‰€ä½¿ç”¨çš„åŒºåŸŸæ¢å¤ä¸ºèƒŒæ™¯è‰²
  - 3ï¼šæ’­æ”¾ä¸‹ä¸€å¸§å‰å°†å½“å‰å¸§æ‰€ä½¿ç”¨çš„åŒºåŸŸæ¢å¤ä¸ºæ¸²æŸ“å½“å‰å¸§å‰çš„çŠ¶æ€
  - 4 - 7ï¼šå¾…å®šä¹‰
- 7 ä½ï¼šæ˜¯å¦å…è®¸ç”¨æˆ·è¾“å…¥æ§åˆ¶ï¼Œæ§åˆ¶æ–¹å¼ç”±è§£æå™¨å†³å®š
- 8 ä½ï¼šé€æ˜æ ‡è¯†ï¼ŒæŒ‡ç¤ºæ˜¯å¦å±•ç¤ºèƒŒæ™¯è‰²ï¼Œåœ¨ gif ä¸­åªæ”¯æŒå®Œå…¨é€æ˜

ç¬¬ 5 - 6 å­—èŠ‚è¡¨ç¤ºæ’­æ”¾ä¸‹ä¸€å¸§æ‰€éœ€è¦ç­‰å¾…çš„æ—¶é—´ã€‚å°ç«¯æ ¼å¼ï¼Œæ¯ä¸ªå•ä½è¡¨ç¤º 10 æ¯«ç§’ï¼›ç¤ºä¾‹ä¸­ `0x64, 0x00` = `0x00, 0x64` = 100ï¼Œ 100 * 10 = 1000msã€‚å»¶è¿Ÿæ—¶é—´å¯ä»¥é…åˆç”¨æˆ·è¾“å…¥æ§åˆ¶ä½¿ç”¨ï¼Œæ’­æ”¾ä¸‹ä¸€å¸§çš„æ—¶æœºå–å†³äºæ˜¯ç”¨æˆ·æ§åˆ¶å…ˆå‘ç”Ÿè¿˜æ˜¯å»¶è¿Ÿæ—¶é—´å…ˆç»“æŸã€‚

ç¬¬ 7 ä¸ªå­—èŠ‚æ˜¯éœ€è¦é€æ˜çš„é¢œè‰²åœ¨è‰²è¡¨ä¸­çš„ç´¢å¼•ï¼Œé…åˆé€æ˜æ ‡è¯†ä½¿ç”¨ã€‚å½“é€æ˜æ ‡è¯†ä¸º 1 ä¸”è®¾ç½®äº†é€æ˜è‰²ç´¢å¼•æ—¶ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªé¢œè‰²åœ¨å½“å‰å›¾åƒä¸­ â€œå®Œå…¨æ¶ˆå¤±â€ï¼Œç”±èƒŒæ™¯è‰²æ›¿ä»£ã€‚

æœ€åæ˜¯ `0x00`ï¼Œæ ‡è¯†ç€å—ç»“æŸã€‚

### Image-Descriptor

å›¾åƒæè¿°ç¬¦ï¼Œæè¿°äº†å½“å‰å›¾åƒçš„ä¿¡æ¯ã€‚é‡åˆ°æ­¤å—æ—¶åˆ™è¡¨ç¤ºç€ä¸€ä¸ª `Image` çš„å¼€å§‹ï¼Œå›ºå®š 10 ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚å§‹ç»ˆæ˜¯ `0x2c`ã€‚å¦‚ä¸‹å›¾ï¼š

![å›¾åƒæè¿°ç¬¦çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/02129d069ddfbe62.webp)

ç¬¬ 2 - 9 å­—èŠ‚åˆ†åˆ«æ˜¯å›¾åƒåœ¨æ•´ä¸ª gif å›¾å½¢åŒºåŸŸä¸­çš„å·¦åç§»ã€ä¸Šåç§»ã€å›¾åƒå®½ã€å›¾åƒé«˜ï¼Œæ¯ä¸ªå€¼å ä¸¤ä¸ªå­—èŠ‚ï¼Œä»¥å°ç«¯æ ¼å¼å­˜å‚¨ã€‚

ç¬¬ 10 ä¸ªå­—èŠ‚æ˜¯ä¸€ä¸ªå‹ç¼©å­—èŠ‚ï¼Œå„ä¸ªä½å«ä¹‰å¦‚ä¸‹ï¼š

- 1 ä½ï¼šæ˜¯å¦æœ‰æœ¬åœ°è‰²è¡¨ï¼Œå­˜åœ¨åˆ™æœ¬åœ°è‰²è¡¨ç´§è·Ÿåœ¨ Image Descriptor åå‡ºç°
- 2 ä½ï¼šå›¾åƒæ•°æ®æ˜¯å¦æ˜¯éš”è¡Œäº¤é”™å­˜å‚¨çš„ï¼Œè¿™ä¸ªæ²¡æœ‰æ·±ç©¶
- 3 ä½ï¼šæ’åºæ ‡è¯†ï¼ŒåŒå…¨å±€è‰²è¡¨
- 4 - 5 ä½ï¼šä¿ç•™ä½
- 6 - 8 ä½ï¼šé¢œè‰²æ•°é‡ï¼ŒåŒå…¨å±€è‰²è¡¨

ç¤ºä¾‹æ–‡ä»¶ä¸­ç¬¬åä¸ªå­—èŠ‚æ˜¯ `0x06`ï¼Œå³ `00000110`ï¼Œæ²¡æœ‰æœ¬åœ°è‰²è¡¨å´è®¾ç½®äº†é¢œè‰²çš„æ•°é‡ï¼Œè¿™æ˜¯ä¸è§„èŒƒçš„ï¼Œå…¶åä¹Ÿä¸ä¼šå­˜åœ¨æœ¬åœ°è‰²è¡¨çš„æ•°æ®ã€‚

è¯¥å—å‰å¯ä»¥æœ‰ä¸€ä¸ªå›¾å½¢æ§åˆ¶æ‰©å±•ç”¨äºæ§åˆ¶å›¾ç‰‡å±•ç¤ºçš„ç»†èŠ‚ã€‚

### Local-Color-Table

æœ¬åœ°è‰²è¡¨ï¼ŒåŒå…¨å±€è‰²è¡¨ï¼Œåœ¨æœ¬åœ°è‰²è¡¨æ ‡è¯†ä¸º 1 æ—¶å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨å…¨å±€è‰²è¡¨ã€‚å¦‚æœæƒ³è¦ gif é‡ç°çœŸå½©è‰²ï¼Œå¯ä»¥åˆ©ç”¨æœ¬åœ°è‰²è¡¨çš„ç‰¹æ€§ï¼Œå°†ä¸€ä¸ªå®Œæ•´çš„å›¾ç‰‡åˆ‡å‰²çš„è¶³å¤Ÿå°ï¼Œå¹¶å¯¹å®ƒä»¬åº”ç”¨ä¸åŒçš„è‰²è¡¨ï¼Œä½†è¿™åœ¨å¤§éƒ¨åˆ†æ—¶å€™æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºè¿™ä¼šå¢åŠ æ•´ä¸ª gif çš„ä½“ç§¯ã€‚

### Image-Data

å›¾åƒæ•°æ®ç´§è·Ÿåœ¨æœ¬åœ°è‰²è¡¨ (ä¸å­˜åœ¨åˆ™è·Ÿéš Image Descriptor) åï¼Œå®é™…æ˜¯ç»è¿‡å‹ç¼©åçš„é¢œè‰²ç´¢å¼•ã€‚åœ¨ gif ç¼–ç ä¸­å°†å›¾åƒä¸­å‡ºç°çš„æ‰€æœ‰é¢œè‰²ç»è¿‡ç®—æ³•å‹ç¼©è‡³ 256 è‰²å†…ï¼Œç„¶åå°†æ¯ä¸ªé¢œè‰²æ›¿æ¢ä¸ºåœ¨è‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²çš„ç´¢å¼•ï¼Œæœ€åé€šè¿‡ lzw ç®—æ³•å°†è¿™äº›ç´¢å¼•å­—èŠ‚å‹ç¼©ã€‚

å…³äºé¢œè‰²å‹ç¼©å’Œ lzw ç®—æ³•å†…å®¹è¾ƒå¤šï¼Œè¿™é‡Œæš‚ä¸”ä¸è¡¨ã€‚

### Plain-Text-Extension

çº¯æ–‡æœ¬æ‰©å±•ï¼Œå­˜æ”¾ ASCII æ–‡æœ¬æ•°æ®ï¼Œè¿™äº›æ–‡æœ¬éœ€è¦è¢«æ¸²æŸ“åˆ° gif ä¸­ï¼Œè™½ç„¶å¤§éƒ¨åˆ†è§£æå™¨éƒ½å¿½ç•¥å®ƒã€‚æ­¤å—åŒ…å« 15 å­—èŠ‚çš„å›ºå®šä¿¡æ¯ï¼Œå…¶åæ˜¯å¯å˜é•¿åº¦çš„æ•°æ®å­å—ï¼Œç”¨äºå­˜æ”¾æ–‡æœ¬æ•°æ®ã€‚å¦‚ä¸‹å›¾ï¼š

![çº¯æ–‡æœ¬æ‰©å±•çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/ea76a08f203542ee.webp)

15 ä¸ªå­—èŠ‚ä¸­ `0x21, 0x01` æ˜¯å›ºå®šçš„ï¼Œæ ‡è¯†è¿™æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ‰©å±•ï¼Œå…¶ä½™å­—èŠ‚çš„å«ä¹‰å¦‚ä¸‹ï¼š

- ç¬¬ 3 ä¸ªå­—èŠ‚æ ‡è¯†åç»­æœ‰å¤šå°‘æ•°æ®
- ç¬¬ 4 - 11 å­—èŠ‚åˆ†åˆ«è¡¨ç¤ºå½“å‰æ–‡æœ¬å—çš„å·¦åç§»ã€ä¸Šåç§»ã€å®½ã€é«˜ç­‰ä¿¡æ¯ï¼Œæ¯ä¸ªå€¼å ä¸¤ä¸ªå­—èŠ‚ï¼Œå°ç«¯æ¨¡å¼ã€‚
- ç¬¬ 12 - 15 å­—èŠ‚åˆ†åˆ«è¡¨ç¤ºå•ä¸ªå­—ç¬¦çš„å®½ã€é«˜ã€å­—ç¬¦é¢œè‰²åœ¨å…¨å±€è‰²è¡¨ä¸­çš„ç´¢å¼•ã€æ–‡æœ¬å—èƒŒæ™¯è‰²åœ¨å…¨å±€è‰²è¡¨ä¸­çš„ç´¢å¼•ã€‚

åç»­è·Ÿéšç€æ•°æ®å­å—ï¼Œè¿™äº›å­å—å°±æ˜¯å®é™…çš„æ–‡æœ¬æ•°æ®ï¼Œè™½ç„¶å¤§éƒ¨åˆ†è§£æå™¨ä¼šå¿½ç•¥å®ƒï¼Œä½† [gifiddle] å®ç°äº†ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„è§£æå™¨æ”¯æŒæ˜¾ç¤ºè¿™äº›æ–‡æœ¬ã€‚

è¯¥å—å‰é¢å¯ä»¥æœ‰ä¸€ä¸ªå›¾å½¢æ§åˆ¶æ‰©å±•ç”¨æ¥æ§åˆ¶æ–‡æœ¬å±•ç¤ºçš„ä¸€äº›ç»†èŠ‚ã€‚

### Application-Extension

åº”ç”¨ç¨‹åºæ‰©å±•ï¼Œè¯¥å—ä»¥ `0x21, 0xff` å¼€å§‹ã€‚ç¤ºä¾‹æ–‡ä»¶ä¸­æ²¡æœ‰è¯¥å—ï¼Œä¸‹å›¾æ˜¯å¦ä¸€ä¸ª gif ä¸­çš„åº”ç”¨ç¨‹åºæ‰©å±•å—ï¼š

![åº”ç”¨ç¨‹åºæ‰©å±•çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/050d4872a4c38fc9.webp)

ç¬¬ä¸‰ä¸ªå­—èŠ‚å¼€å§‹æ˜¯ `[info]` æ•°æ®ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æ ‡è¯†åç»­æœ‰å¤šå°‘ (0x0b) ä¸ªå­—èŠ‚ï¼Œåç»­å­—èŠ‚ä¸€èˆ¬æ˜¯ ASCII ç å€¼ `NETSCAPE2.0`ã€‚

éšåæ˜¯æ•°æ®å­å—ï¼Œå­å—ä¸­ç¬¬ 1 ä¸ªå­—èŠ‚ä¾æ—§æ˜¯æ ‡è¯†åç»­æœ‰å¤šå°‘ä¸ªå­—èŠ‚ï¼Œç¬¬ 2 ä¸ªå­—èŠ‚æ˜¯åº”ç”¨ç¨‹åº `ID`ã€‚ç¬¬ 3ã€4 å­—èŠ‚ç”¨äºæ§åˆ¶è¿™ä¸ª gif çš„å¾ªç¯æ’­æ”¾æ¬¡æ•°ï¼Œå¦‚æœæ˜¯ `0x00, 0x00` åˆ™è¡¨ç¤ºæ— é™å¾ªç¯ã€‚

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ gif æ’­æ”¾æ¬¡æ•°æ§åˆ¶ï¼Œåˆ›å»ºä¸€ä¸ªç‚¹å‡»åæ˜¯å¦ä¸€å¼ å›¾ç‰‡çš„ gifï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªåªåŒ…å«ä¸¤å¸§å¹¶ä¸”åªæ’­æ”¾ä¸€æ¬¡çš„ gif ä¸Šä¼ è‡³ä¸€äº›å¹³å°ï¼Œå› ä¸ºè¿™äº›å¹³å°åœ¨ç”¨æˆ·ç‚¹å‡»ä¹‹å‰åªä¼šå±•ç¤ºä¸€å¼ åŒ…å«ç¬¬ä¸€å¸§çš„å›¾ç‰‡ï¼Œåœ¨ç‚¹å‡»åæ‰ä¼šçœŸæ­£åŠ è½½ gifï¼Œæ­¤æ—¶ gif ç«‹å³æ’­æ”¾å¹¶åˆ‡æ¢è‡³ä¸‹ä¸€å¸§å°±å®Œæˆäº†æˆ‘ä»¬çš„éœ€æ±‚ã€‚

### Trailer

æ–‡ä»¶ç»“å°¾ï¼ŒåŒ…å«å›ºå®šå€¼ `0x3b`ã€‚

## å…«å‰æ ‘é¢œè‰²é‡åŒ–ç®—æ³•

æ ¹æ®ä¸Šé¢çš„å†…å®¹æˆ‘ä»¬çŸ¥é“äº†ï¼Œgif ä¸­å›¾åƒæ•°æ®çš„ç¼–ç æ˜¯éœ€è¦å°†çœŸå½©è‰²è½¬æ¢ä¸º 256 è‰²ï¼Œç„¶åå°†å›¾åƒä¸­æ¯ä¸ªåƒç´ ç‚¹çš„é¢œè‰²æ•°æ®æ›¿æ¢ä¸ºè¿™ 256 è‰²ä¸­çš„ç´¢å¼•çš„ã€‚è¿™å¯ä»¥çœ‹ä½œæ˜¯ gif ç¼–ç çš„ç¬¬ä¸€æ¬¡å‹ç¼©ï¼Œç„¶åæˆ‘ä»¬å†ä¾èµ–äº lzw ç®—æ³•å‹ç¼©è¿™äº›ç´¢å¼•ã€‚

é‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆå‹ç¼©é¢œè‰²å‘¢ï¼Œæš´åŠ›æšä¸¾å—ï¼Ÿå¦‚æœä½ æƒ³è¦ä½ çš„æµè§ˆå™¨è·‘ä¸ª 44 åˆ†é’Ÿçš„ä»£ç é‚£å¯ä»¥è¯•è¯•ã€‚æˆ‘åœ¨åˆšå¼€å§‹ç ”ç©¶ gif ç¼–è§£ç æ—¶æ²¡æœ‰ç»è¿‡ä»»ä½•ç®—æ³•ï¼Œæš´åŠ›æšä¸¾æ¥å®Œæˆé¢œè‰²å‹ç¼©åŠ lzw å‹ç¼©ï¼Œè¿™å¯¼è‡´æˆ‘çš„æµè§ˆå™¨é™·å…¥äº†é•¿æ—¶é—´çš„è¿è¡Œï¼Œä¸€åº¦æ€€ç–‘ä»£ç æœ‰é”™è¯¯å‡ºç°äº†æ­»å¾ªç¯ï¼Œåœ¨å°è¯•è¿‡å‡ æ¬¡åæˆ‘ä¸å»æ“ä½œå®ƒï¼Œè®©å®ƒä¸€ç›´è¿è¡Œï¼Œç»è¿‡è®¡ç®—å¼€å§‹å’Œç»“æŸçš„ä¸¤æ¬¡ `performance` æ—¶é—´å·®ï¼Œæˆ‘å‘ç°å¤„ç†ä¸€å¼  1092 x 1080 çš„å›¾ç‰‡éœ€è¦ 44 åˆ†é’Ÿã€‚

ä¸ºæ­¤æˆ‘æŸ¥æ‰¾åˆ°äº†å…«å‰æ ‘é¢œè‰²é‡åŒ–ç®—æ³•ã€‚é¢œè‰²é‡åŒ–ï¼Œå°±æ˜¯é€šè¿‡äººçœ¼å¯¹é¢œè‰²çš„æƒ°æ€§ï¼Œå°†åŸå›¾ä¸­ç›¸è¿‘çš„é¢œè‰²åˆå¹¶ä¸ºä¸€ç§é¢œè‰²ï¼Œä½¿é‡åŒ–å‰åçš„å›¾åƒå¯¹äºäººçœ¼çš„è®¤è¯†è¯¯å·®æœ€å°ï¼Œä»¥æ­¤è¾¾åˆ°é¢œè‰²å‹ç¼©çš„ç›®çš„ã€‚å…«å‰æ ‘ï¼Œå³äºŒå‰æ ‘çš„å˜ç§ï¼ŒåŒºåˆ«äºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå…«å‰æ ‘ä¸­æ¯ä¸ªå­èŠ‚ç‚¹å…è®¸å­˜åœ¨å…«ä¸ªå­èŠ‚ç‚¹ã€‚

è¿™é‡Œæˆ‘ä¼šå°½åŠ›è®²æ¸…æ¥šå…«å‰æ ‘é¢œè‰²é‡åŒ–çš„åŸºæœ¬æ¦‚å¿µå¹¶å®ç°ä¸€ä¸ªç®€å•çš„å…«å‰æ ‘é¢œè‰²é‡åŒ–ï¼Œå¦‚æœå¯¹é¢œè‰²é‡åŒ–å†…å®¹æ„Ÿå…´è¶£çš„è¯å»ºè®®é˜…è¯»ä¸“é—¨è®²è§£è¿™æ–¹é¢çš„æ–‡ç« ã€‚

### é¢œè‰²æ”¶é›†

æˆ‘ä»¬ä»¥ rgb é¢œè‰² `[255, 255, 255]` ä¸ºä¾‹ï¼Œçœ‹çœ‹æ€ä¹ˆå°†å®ƒæ’å…¥åˆ°å…«å‰æ ‘ä¸­ã€‚æˆ‘ä»¬å°† rgb å€¼éƒ½è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶æ’åˆ—æˆçŸ©é˜µï¼Œå¦‚ä¸‹ï¼š

```js
[
  /* r */[1, 1, 1, 1, 1, 1, 1, 1],
  /* g */[1, 1, 1, 1, 1, 1, 1, 1],
  /* b */[1, 1, 1, 1, 1, 1, 1, 1]
]
```

æˆ‘ä»¬å…ˆå– rgb å€¼çš„æœ€é«˜ä½ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ç´¢å¼•ä¸º 0 çš„ä½ï¼Œä»¥ r ä¸ºé«˜ä½ b ä¸ºä½ä½çš„é¡ºåºæ’åˆ—ï¼Œç»„æˆ `111` çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ•°å­— 7ï¼Œæˆ‘ä»¬å³åœ¨å…«å‰æ ‘ä¸­ `root` æ ‘å­æ ‘ä½ç½® 7 çš„åœ°æ–¹æ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ (å¦‚æœä¸å­˜åœ¨)ã€‚

![rgb æ”¶é›†çš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/63c84f91f8d0ca8b.webp)

æ¥ä¸‹æ¥æˆ‘ä»¬å†è¯»å–çŸ©é˜µä¸­ç´¢å¼•ä¸º 1 çš„ä½ï¼Œå†æ¬¡æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œä½†è¿™æ¬¡æˆ‘ä»¬æ’å…¥åˆ°åˆšåˆšåˆ›å»ºçš„æ–°èŠ‚ç‚¹çš„å­æ ‘ä¸­ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå› ä¸ºå­—èŠ‚æ€»å…±æœ‰å…«ä½ï¼Œæ‰€ä»¥å…«å‰æ ‘æœ€æ·±ä¹Ÿåªèƒ½æœ‰å…«å±‚ (é™¤å» root æ ‘)ã€‚

ç»è¿‡è¿™ä¸€æ­¥æ“ä½œï¼Œæˆ‘ä»¬ä¼šå‘ç°ç›¸åŒçš„é¢œè‰²æ€»æ˜¯ä¼šè½åˆ°ç›¸åŒçš„ä½ç½®ï¼Œç›¸è¿‘çš„é¢œè‰²ä¹Ÿä¼šè½åˆ°åŒä¸€é¢—æ ‘ä¸­ã€‚ä»¥ä¸‹å›¾ä¸ºä¾‹

![rgb æ ‘å±•ç¤ºçš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/7f4a65aacc959abb.webp)

![rgb æ ‘å±•ç¤ºçš„å›¾ç‰‡2](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/723268bd85db31ee.webp)

ä¸Šé¢çš„æ•°æ®åªæ˜¯æœ€ä½ä½å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœç¡®å®æ˜¯å°†å®ƒä»¬å½’çº³åˆ°äº†åŒä¸€é¢—æ ‘ä¸­ï¼Œè¿™äº›é¢œè‰²å¦‚ä¸‹å›¾ï¼š

![rgb åŒä¸€é¢—æ ‘é¢œè‰²çš„å±•ç¤ºå›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/2a55b6b16180a7b5.webp)

ä½ èƒ½çœ‹å‡ºåŒºåˆ«å—ï¼Ÿæ˜¯ä¸æ˜¯å¾ˆéš¾ï¼Œé‚£å¦‚æœæˆ‘ä»¬å°†è¿™ç¬¬å…«å±‚çš„æ•°æ®ä¸¢å¼ƒæ”¹ç”¨å®ƒä»¬å…±åŒçš„çˆ¶èŠ‚ç‚¹ï¼Œè¿™æ ·å¯¼è‡´çš„é¢œè‰²å·®å¼‚æ˜¯ä¸æ˜¯å¾ˆå°å‘¢ï¼Ÿ

### é¢œè‰²é‡åŒ–

åœ¨æ”¶é›†å…¨éƒ¨é¢œè‰²ä¹‹åæˆ‘ä»¬éœ€è¦å¼€å§‹å¯¹é¢œè‰²é‡åŒ–å¤„ç†ï¼Œå› ä¸ºå…«å‰æ ‘çš„ç‰¹æ€§ï¼Œå®é™…ä¸Šåœ¨æ”¶é›†é¢œè‰²æ—¶æˆ‘ä»¬å°±å·²ç»å°†é¢œè‰²åˆ†å¥½ç±»äº†ï¼Œå¯¹äºç›¸è¿‘çš„é¢œè‰²æ€»æ˜¯ä¼šåœ¨åŒä¸€é¢—æ ‘ä¸­ï¼Œæ‰€ä»¥é¢œè‰²é‡åŒ–çš„è¿‡ç¨‹å¯ä»¥è¯´æ˜¯å…«å‰æ ‘çš„æ”¶ç¼©ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…«å‰æ ‘ä»ç¬¬å…«å±‚å¼€å§‹ï¼Œä¸åœçš„å‘ä¸Šæ”¶ç¼©ç›´åˆ°é¢œè‰²æ•°é‡è¾¾åˆ°æˆ‘ä»¬çš„è¦æ±‚ã€‚

å› ä¸ºå›¾åƒä¸­ç›¸åŒé¢œè‰²å‡ºç°çš„æ¦‚ç‡æ˜¯å¾ˆå¤§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨é¢œè‰²æ”¶é›†æ—¶å¯¹åŒä¸€é¢œè‰²éœ€è¦ç´¯åŠ å®ƒä»¬çš„ rgb å€¼ï¼Œå¹¶è®°å½•è¿™ä¸ªé¢œè‰²å‡ºç°çš„æ¬¡æ•°ï¼Œåœ¨é‡åŒ–è¿‡ç¨‹ä¸­éœ€è¦å°†æ‰€æœ‰è¢«åˆ é™¤èŠ‚ç‚¹çš„ rgb å€¼ç›¸åŠ å¹¶é™¤å»ç´¯åŠ åçš„é¢œè‰²å‡ºç°æ¬¡æ•°ï¼Œæ¥è·å–æ›´ç²¾ç¡®çš„é¢œè‰²å€¼ã€‚

ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘ä¸€ä¸ªå› ç´ ï¼Œé‚£å°±æ˜¯æ¯é¢—æ ‘ä¸­çš„èŠ‚ç‚¹åœ¨è¿™ä¸ªå›¾åƒé‡Œçš„é‡è¦æ€§ï¼Œåœ¨å›¾åƒä¸­å¯èƒ½å­˜åœ¨å¤§éƒ¨åˆ†é¢œè‰²éƒ½é›†ä¸­åœ¨æŸé¢—æ ‘çš„æƒ…å†µï¼Œå…¶ä»–æ ‘åªè®°å½•äº†éƒ¨åˆ†é¢œè‰²ï¼Œè¿™æ—¶å¦‚æœè¿˜æ˜¯å±‚å±‚å»æ”¶ç¼©å…«å‰æ ‘çš„è¯å¯èƒ½ä¼šé€ æˆè¾ƒå¤§å·®å¼‚ï¼Œè¿™é‡Œå¯ä»¥é…Œæƒ…è€ƒè™‘æ€ä¹ˆå¤„ç†ã€‚

å…«å‰æ ‘è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯æ˜“äºæŸ¥æ‰¾ï¼Œå¯¹äºç›¸è¿‘çš„é¢œè‰²è€Œè¨€ï¼Œå®ƒæ€»æ˜¯ä¼šç»è¿‡ç›¸åŒçš„è·¯å¾„ï¼Œå³ä½¿æ˜¯ç»è¿‡é‡åŒ–åä¹Ÿèƒ½å‡†ç¡®çš„æ‰¾åˆ°å®ƒå¯¹åº”çš„é‡åŒ–åçš„é¢œè‰²ï¼Œè¿™å¯¹äºæˆ‘ä»¬åç»­å°†é¢œè‰²æ›¿æ¢ä¸ºè‰²è¡¨ç´¢å¼•æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚

ä»¥ä¸‹ä»£ç æ˜¯æˆ‘å®ç°çš„ä¸€ä¸ªå…«å‰æ ‘é¢œè‰²é‡åŒ–ç±»ï¼Œè¿˜æ˜¯ä½¿ç”¨ç®€æ˜“çš„å±‚å±‚æ”¶ç¼©æ¥è¾¾åˆ°é¢œè‰²é‡åŒ–çš„ç›®çš„ï¼š

```ts
class OctreeNode {
  children: OctreeNode[] = [];
  color: ColorObject | null;
  pixelCount = 0;

  constructor() {
    this.color = null;
  }
}

class Octree {
  private maxDepth = 8;
  private count = 1;

  root: OctreeNode;

  constructor(maxDepth = 8) {
    if (maxDepth > 8) {
      throw new Error('the maximum depth cannot exceed 8');
    }

    this.maxDepth = maxDepth;
    this.root = new OctreeNode();
  }

  insertColor(color: ColorObject) {
    let node = this.root;

    node.pixelCount++;

    for (let depth = this.maxDepth - 1; depth >= 0; depth--) {
      const index = this.getColorIndex(color, depth);

      if (!node.children[index]) {
        node.children[index] = new OctreeNode();
      }

      node = node.children[index];

      node.pixelCount++;
    }

    if (node.color === null) {
      this.count++;

      return (node.color = color);
    }

    const rgb = ['r', 'g', 'b'] as const;

    for (let i = 0; i < rgb.length; i++) {
      node.color[rgb[i]] += color[rgb[i]];
    }
  }

  getColorIndex(color: ColorObject, depth: number) {
    let index = 0;
    const mask = 1 << depth;

    if (color.r & mask) {
      index |= 1;
    }

    if (color.g & mask) {
      index |= 2;
    }

    if (color.b & mask) {
      index |= 4;
    }

    return index;
  }

  shrink(maxCount: number) {
    if (this.count <= maxCount) return [];

    for (let depth = this.maxDepth - 1; depth >= 0; depth--) {
      this.reduceColor(this.root, depth, 0, maxCount);

      if (this.count <= maxCount) break;
    }

    return this.collectColor();
  }

  reduceColor(
    node: OctreeNode,
    depth: number,
    currDepth: number,
    maxCount: number
  ) {
    if (this.count <= maxCount) return;

    const children = [...node.children];

    if (depth === currDepth) {
      this._reduceColor(node, maxCount);
    } else if (depth > currDepth) {
      for (let i = 0; i < children.length; i++) {
        if (children[i] === null || children[i] === undefined) continue;

        this.reduceColor(children[i], depth, currDepth + 1, maxCount);
      }
    }
  }

  _reduceColor(node: OctreeNode, maxCount: number) {
    let isClear = true;

    const children = [...node.children];

    children.sort((a, b) => a.pixelCount - b.pixelCount);

    for (let i = 0; i < children.length; i++) {
      if (children[i] === null || children[i] === undefined) continue;

      const color = children[i].color;

      if (color === null) continue;

      if (node.color === null) {
        node.color = color;

        continue;
      }

      const rgb = ['r', 'g', 'b'] as const;

      for (let j = 0; j < rgb.length; j++) {
        node.color[rgb[j]] += color[rgb[j]];
      }

      this.count--;

      if (this.count <= maxCount) {
        isClear = false;

        for (let j = 0; j < i; j++) {
          const index = node.children.indexOf(children[j]);

          node.children.splice(index, 1, null as unknown as OctreeNode);
        }

        break;
      }
    }
    if (isClear) node.children = [];
  }

  quantizeColor(color: ColorObject) {
    let node = this.root;

    for (let depth = this.maxDepth - 1; depth >= 0; depth--) {
      const index = this.getColorIndex(color, depth);
      if (!node.children[index]) {
        break;
      }
      node = node.children[index];
    }

    return node.color;
  }

  collectColor(node = this.root) {
    if (node === null || node === undefined) return [];

    const colors: ColorObject[] = [];
    const children = node.children;

    for (let i = 0; i < children.length; i++) {
      if (children[i] === null || children[i] === undefined) continue;

      const { color } = children[i];
      if (color) {
        if (!color.normalize) {
          const { r, g, b } = color;

          color.r = Math.round(r / children[i].pixelCount) || 0;
          color.g = Math.round(g / children[i].pixelCount) || 0;
          color.b = Math.round(b / children[i].pixelCount) || 0;
          color.normalize = true;
        }

        colors.push(color);
      }

      colors.push(...this.collectColor(children[i]));
    }

    return colors;
  }

  calcColorDistance(color_1: ColorObject, color_2: ColorObject) {
    const d = Math.sqrt(
      (color_1.r - color_2.r) ** 2 +
        (color_1.g - color_2.g) ** 2 +
        (color_1.b - color_2.b) ** 2
    );

    return Math.floor(
      (1 - d / Math.sqrt(255 ** 2 + 255 ** 2 + 255 ** 2)) * 100
    );
  }
}
```

åœ¨ç ”ç©¶é¢œè‰²é‡åŒ–ç®—æ³•çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç° [gif.js] è½¬æ¢çš„å›¾åƒä¸æºå›¾åƒçš„å·®å¼‚å¾ˆå°ï¼Œç¿»çœ‹äº†å®ƒçš„æºç å‘ç°ä½¿ç”¨äº† [NeuQuant Neural-Net Quantization Algorithm]ï¼Œå³ç¥ç»ç½‘ç»œç®—æ³•ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»ç ”ç©¶ã€‚

## lzw å‹ç¼©ç®—æ³•

åœ¨å›¾åƒæ•°æ®ä¸€èŠ‚ä¸­æˆ‘ä»¬çŸ¥é“äº† gif ä¸­å­˜å‚¨çš„å›¾åƒæ•°æ®æ˜¯ç»è¿‡å‹ç¼©çš„é¢œè‰²ç´¢å¼•ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡å…«å‰æ ‘å°†æ¯ä¸ªåƒç´ çš„é¢œè‰²è½¬æ¢ä¸ºç´¢å¼•äº†ï¼Œæ¥ä¸‹æ¥åˆ™éœ€è¦å¯¹å®ƒè¿›è¡Œå‹ç¼©ï¼Œè¿™æ˜¯é€šè¿‡ lzw ç®—æ³•æ¥å®ç°çš„ã€‚

å…³äº lzw ç®—æ³•ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šè¯¦ç»†è®²è§£çš„æ–‡ç« äº†ï¼Œä¹Ÿæƒ³ä¸åˆ°æ€ä¹ˆå†™çš„æ›´é€šä¿—æ˜“æ‡‚ä¸€ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œåªè´´å‡ºç›¸å…³ä»£ç ï¼Œé€šè¿‡æ³¨é‡ŠåŠ ä»¥è®²è§£ï¼Œå¦‚æœå¯¹åŸç†æ„Ÿå…´è¶£æˆ‘æ–‡æœ«ä¼šè´´å‡ºé“¾æ¥ã€‚

### ç¼–ç 

```ts
class TrieNode {
  children: TrieNode[];
  isEndOfWord: boolean;
  code!: number;

  constructor() {
    this.children = new Array(4096);
    this.isEndOfWord = false;
  }
}

/**
 * å­—å…¸æ ‘ï¼Œåœ¨å‹ç¼©è¿‡ç¨‹ä¸­éœ€è¦æŸ¥æ‰¾å‰ç¼€æ•°æ®ï¼Œè¿™éƒ¨åˆ†è€—æ—¶å¾ˆé•¿ï¼Œæ‰€ä»¥ä½¿ç”¨äº†å­—å…¸æ ‘å‡å°‘æŸ¥æ‰¾è€—æ—¶
 */
class Trie {
  root = new TrieNode();
  count = 0;

  insert(nums: number[]) {
    let node = this.root;

    for (let i = 0; i < nums.length; i++) {
      const index = nums[i];

      if (!node.children[index]) {
        node.children[index] = new TrieNode();
      }

      node = node.children[index];
    }

    node.isEndOfWord = true;
    node.code = this.count;

    this.count++;
  }

  search(nums: number[]) {
    let node = this.root;
    for (let i = 0; i < nums.length; i++) {
      const index = nums[i];

      if (!node.children[index]) {
        return false;
      }

      node = node.children[index];
    }

    return node;
  }

  clear() {
    this.root = new TrieNode();
    this.count = 0;
  }
}

/**
 *
 * @param indexStream è¾“å…¥æµï¼Œç´¢å¼•æ•°ç»„
 * @param colorTable è‰²è¡¨
 */
function encoder(indexStream: number[], colorTable: number[][]) {
  /*
    åˆå§‹åŒ–æœ€å°ä»£ç å¤§å°ï¼Œåœ¨ç¼–ç è§£ç ä¸­éƒ½æ‰®æ¼”äº†é‡è¦è§’è‰²ï¼Œåº”è¯¥å§‹ç»ˆå¤§äºç­‰äºè‰²è¡¨é•¿åº¦
    ä»¥ 256 è‰²ä¸ºä¾‹ï¼ŒlzwMiniCodeSize åº”ä¸º 8ï¼Œ256 = (2 ** 8)
  */
  let lzwMiniCodeSize = 2;
  while (colorTable.length > 1 << lzwMiniCodeSize) lzwMiniCodeSize++;

  /* åˆå§‹åŒ–æ¸…é™¤ç ï¼Œä¸ºäº†å‹ç¼©æ•ˆç‡ï¼Œgif å»ºè®®æ¯å½“è¾“å‡ºä»£ç  0xfff æ—¶é‡ç½®æ˜ å°„è¡¨ï¼ŒåŒæ—¶è¾“å‡ºæ¸…é™¤ç  */
  const clearCode = 1 << lzwMiniCodeSize;
  /* åˆå§‹åŒ–ä¿¡æ¯ç»“æŸç ï¼Œå½“è¾“å…¥æµå‹ç¼©å®Œæˆæ—¶è¾“å‡ºä¿¡æ¯ç»“æŸç  */
  const eoiCode = clearCode + 1;
  /*
    åˆå§‹åŒ–æ˜ å°„è¡¨ï¼Œlzw å‹ç¼©æ˜¯åˆ©ç”¨è¾ƒçŸ­çš„ä»£ç è¡¨ç¤ºè¾ƒé•¿çš„ä»£ç æ¥å®ç°å‹ç¼©çš„ï¼Œä¾èµ–äºæ˜ å°„è¡¨æ¥å®Œæˆæ•°æ®æ›¿æ¢
    æ˜ å°„è¡¨æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œé™¤äº†åˆå§‹çš„æ˜ å°„æ•°æ®å¤–ï¼Œå…¶ä»–çš„æ•°æ®åœ¨å‹ç¼©è¿‡ç¨‹ä¸­ç¡®å®š
  */
  const trie = new Trie();

  /* åˆå§‹åŒ–è¾“å‡ºï¼Œå­˜æ”¾å‹ç¼©åçš„ä»£ç  */
  const codeStream: number[] = [];

  /*
    åˆå§‹åŒ–å¯å˜ä»£ç å¤§å°ï¼Œåˆå§‹å€¼ä¸º lzwMiniCodeSize + 1ï¼ŒcodeSize ä¸èƒ½å¤§äº 12ï¼Œæ¯å½“è¾“å‡ºä»£ç  0xfff æ—¶ï¼Œ
    è¾“å‡ºæ¸…é™¤ç åç«‹å³é‡ç½®
  */
  let codeSize = lzwMiniCodeSize + 1;
  /*
    å½“å‰å‰ç¼€
  */
  let prefix: number[] = [];
  /*
    å½“å‰ç´¢å¼•
  */
  let k: number[] = [];

  /* åˆå§‹åŒ–è¾“å…¥é•¿åº¦ */
  const len = indexStream.length;
  /* åˆå§‹åŒ–æŒ‡é’ˆï¼ŒæŒ‡å‘è¾“å…¥æµçš„å½“å‰ä½ç½® */
  let point = 0;

  // é¦–å…ˆè¾“å‡ºæ¸…é™¤ç 
  codeStream.push(clearCode);

  // å–ç¬¬ä¸€ä¸ªè¾“å…¥ä½œä¸ºåˆå§‹åŒ–çš„å½“å‰å‰ç¼€
  prefix = [indexStream[point++]];

  // åˆå§‹åŒ–æ˜ å°„è¡¨
  for (let i = 0; i <= eoiCode; i++) trie.insert([i]);

  // ä¸»å¾ªç¯ä½“
  while (point < len) {
    // è·å–ä¸‹ä¸€ä¸ªè¾“å…¥ä½œä¸º k
    k = [indexStream[point++]];

    // æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ (å‰ç¼€ + k)
    const current = prefix.concat(k);
    const result = trie.search(current);

    // æ‰¾åˆ°åˆ™: å‰ç¼€ = (å‰ç¼€ + k)
    if (result) {
      prefix = current;
      k = [];

      continue;
    }

    // æœªæ‰¾åˆ°åœ¨æ˜ å°„è¡¨ä¸­æ’å…¥
    trie.insert(current);
    // è·å–å‰ç¼€å¯¹åº”çš„ç 
    const prefixCode = trie.search(prefix);
    // æ·»åŠ è‡³ç è¡¨
    if (prefixCode) {
      codeStream.push(prefixCode.code);
    }

    // (å‰ç¼€ = k)
    prefix = k;
    // k é‡ç½®
    k = [];

    // è·å–åˆšåˆšæ·»åŠ çš„ç 
    const preCode = trie.count - 1;

    // å¦‚æœç å¤§äº codeSize æ‰€èƒ½è¡¨ç¤ºçš„æ•°å­—ä¸” codeSize å°äº 12, codeSize + 1
    if (preCode > (1 << codeSize) - 1 && codeSize < 12) {
      codeSize++;
    } else if (preCode === 1 << 12) {
      // å¦‚æœç ç­‰äºæœ€å¤§ä»£ç  12 æ‰€èƒ½è¡¨ç¤ºçš„å€¼, é‡æ–°åˆå§‹åŒ–æ˜ å°„è¡¨
      trie.clear();
      for (let i = 0; i <= eoiCode; i++) trie.insert([i]);
      // è¾“å‡ºæ¸…é™¤ç 
      codeStream.push(clearCode);
      // é‡ç½® codeSize
      codeSize = lzwMiniCodeSize + 1;
    }
  }

  // å·²å®Œæˆè¾“å‡ºæœ€åçš„ç 
  const val = trie.search(prefix);
  if (val) {
    codeStream.push(val.code);
  }
  // è¾“å‡ºä¿¡æ¯ç»“æŸç 
  codeStream.push(eoiCode);
}
```

ä»£ç ä¸­ç”¨åˆ°äº†å­—å…¸æ ‘ï¼Œå› ä¸ºåœ¨å‹ç¼©è¿‡ç¨‹ä¸­ä¼šä¸æ–­æ›´æ–°æ˜ å°„è¡¨ï¼Œå¹¶é€šè¿‡å‰ç¼€åœ¨æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾æ•°æ®ã€‚ä¸€å¼€å§‹çš„ä»£ç æ²¡æœ‰ä½¿ç”¨æ•°æ®ç»“æ„æ‰€ä»¥è€—æ—¶å¾ˆé•¿ï¼Œå’¨è¯¢äº†ç¾¤å¤§ä½¬åå¾—çŸ¥è¿™ç§å‰ç¼€æŸ¥æ‰¾çš„æ–¹å¼é€‚åˆä½¿ç”¨å­—å…¸æ ‘ï¼Œå½“ç„¶ç°åœ¨ç¼–ç è¿˜æ˜¯æ¯”è¾ƒæ…¢ï¼Œæœ‰æƒ³æ³•çš„å¤§ä½¬å¯ä»¥è®¨è®ºäº¤æµã€‚

### è§£ç 

```ts
/**
 *
 * @param blocks å›¾åƒæ•°æ®å—ï¼Œgif ä¸­å›¾åƒæ•°æ®ä¸€èˆ¬è¢«åˆ†ä¸ºæ¯å— 255 å­—èŠ‚çš„æ•°æ®
 * @param lzwMiniCodeSize æœ€å°ä»£ç å¤§å°
 * @param colorTable è‰²è¡¨
 */
function decoder(codeStream: number[], lzwMiniCodeSize: number) {
  /* åˆå§‹åŒ–æ¸…é™¤ç  */
  const clearCode = 1 << lzwMiniCodeSize;
  /* åˆå§‹åŒ–ä¿¡æ¯ç»“æŸç  */
  const eoiCode = clearCode + 1;
  /* åˆå§‹åŒ–æ˜ å°„è¡¨ï¼Œè¿™æ ·ä¸éœ€è¦æŸ¥æ‰¾å‰ç¼€çš„æ“ä½œ */
  const trie = new Map<number, number[]>();
  /* åˆå§‹åŒ–è¾“å‡ºç´¢å¼•æµ */
  const indexStream: number[] = [];

  /* åˆå§‹åŒ–å¯å˜ä»£ç å¤§å° */
  let codeSize = lzwMiniCodeSize + 1;

  /* å½“å‰ä»£ç  */
  let code = -1;
  /* code å¯¹åº”çš„ç´¢å¼•å€¼ */
  let $index: number[] = [];
  /* ä¹‹å‰çš„ä»£ç  */
  let prevCode = -1;
  /* å‰ç¼€ */
  let perfix: number[] = [];
  /* æ¯æ¬¡ç´¢å¼•æ›´æ–°æ—¶çš„ç¬¬ä¸€ä¸ªç´¢å¼• */
  let k = -1;
  /* æŒ‡é’ˆæŒ‡å‘å½“å‰ä»£ç ç´¢å¼• */
  let cursor = 0;

  /* æ˜¯å¦å·²å®Œæˆ */
  let isFinish = false;

  /* è·å–ç¬¬ä¸€ä¸ªä»£ç ï¼Œç¬¬ä¸€ä¸ªä»£ç åº”å§‹ç»ˆæ˜¯æ¸…é™¤ç  */
  code = codeStream[cursor++];
  if (code !== clearCode) {
    throw new Error(
      "invalid data, the first code in the code stream should be Clear Code"
    );
  }

  /* åˆå§‹åŒ–æ˜ å°„è¡¨ */
  for (let i = 0; i <= eoiCode; i++) trie.set(i, [i]);

  /* è·å–ç¬¬äºŒä¸ªä»£ç  */
  code = codeStream[cursor++];
  /* è·å– code å¯¹åº”çš„ç´¢å¼•å€¼ */
  $index = trie.get(code)!;
  /* è¾“å‡ºç´¢å¼• */
  indexStream.push(...$index);
  /* prevCode è®¾ç½®ä¸ºå½“å‰ code */
  prevCode = code;

  /* ä¸»å¾ªç¯ */
  while (cursor < codeStream.length) {
    /* åœ¨æ¯æ¬¡æ˜ å°„è¡¨è¾“å‡ºçš„ä»£ç ç­‰äº 1 << codeSize æ—¶ï¼ŒcodeSize éœ€è¦å¢åŠ ä¸”ä¸èƒ½å¤§äº 12 */
    if (trie.size - 1 === (1 << codeSize) - 1 && codeSize < 12) {
      codeSize++;
    }

    /* è·å–ä¸‹ä¸€ä¸ªä»£ç  */
    code = codeStream[cursor++];

    switch (true) {
      /* code ç­‰äºæ¸…é™¤ç æ—¶é‡ç½®æ˜ å°„è¡¨å³ codeSize */
      case code === clearCode:
        /* é‡ç½®æ˜ å°„è¡¨ */
        trie.clear();
        /* é‡æ–°åˆå§‹åŒ– */
        for (let i = 0; i <= eoiCode; i++) trie.set(i, [i]);
        /* é‡ç½® codeSize */
        codeSize = lzwMiniCodeSize + 1;

        /* è·å–ä¸‹ä¸€ä¸ªä»£ç  */
        code = codeStream[cursor++];
        /* å°†å½“å‰ code å¯¹åº”çš„ç´¢å¼•å€¼æ·»åŠ è‡³è¾“å‡º */
        $index = trie.get(code)!;
        indexStream.push(...$index);
        /* ä¹‹å‰çš„ä»£ç è®¾ç½®ä¸ºå½“å‰ä»£ç  */
        prevCode = code;
        break;

      /* code ç­‰äºä¿¡æ¯ç»“æŸç æ—¶ï¼Œå›¾åƒç»“æŸï¼Œç»“æŸå‹ç¼© */
      case code === eoiCode:
        isFinish = true;
        break;

      /* å…¶ä»– code å€¼ */
      default:
        if (trie.has(code)) {
          /* æ˜ å°„è¡¨ä¸­å­˜åœ¨ code æ—¶è·å–å½“å‰ code å¯¹åº”çš„ç´¢å¼• */
          $index = trie.get(code)!;
          /* æ·»åŠ è‡³è¾“å‡º */
          indexStream.push(...$index);
          /* è·å– prevCode å¯¹åº”çš„ç´¢å¼• */
          perfix = trie.get(prevCode)!;
          /* k è®¾ç½®ä¸º å½“å‰ code å¯¹åº”ç´¢å¼•çš„ç¬¬ä¸€ä¸ªç´¢å¼• */
          k = $index[0];
          /* å‰ç¼€ + k */
          perfix = perfix.concat(k);
          /* æ˜ å°„è¡¨ä¸­æ’å…¥ å‰ç¼€ + k */
          trie.set(trie.size, perfix);
          /* ä¹‹å‰çš„ç ç­‰äºå½“å‰ç  */
          prevCode = code;
        } else {
          /* ä¸å­˜åœ¨åˆ™è·å– prevCode å¯¹åº”çš„ç´¢å¼• */
          perfix = trie.get(prevCode)!;
          /* k è®¾ç½®ä¸ºå‰ç¼€çš„ç¬¬ä¸€ä¸ªç´¢å¼• */
          k = perfix[0];
          /* å‰ç¼€ = å‰ç¼€ + k */
          perfix = perfix.concat(k);
          /* è¾“å‡ºç´¢å¼• å‰ç¼€ + k */
          indexStream.push(...perfix);
          /* æ˜ å°„è¡¨æ·»åŠ å‰ç¼€æ•°æ® */
          trie.set(trie.size, perfix);
          /* ä¹‹å‰çš„ç ç­‰äºå½“å‰ç  */
          prevCode = code;
        }

        break;
    }

    if (isFinish) break;
  }
}
```

## æ¡ˆä¾‹

ä¿—è¯è¯´å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œä¸€ä¸ªä¸œè¥¿å†æ€ä¹ˆç ”ç©¶ä¹Ÿæ˜¯éœ€è¦å®è·µçš„ï¼Œæ‰€ä»¥æˆ‘åŸºäºä¸Šè¿°å†…å®¹å®ç°äº†å‡ ä¸ªæ¡ˆä¾‹ï¼Œåˆ†åˆ«æ˜¯ï¼šè§†é¢‘è½¬ gifï¼Œè¿™æ˜¯æœ€åˆæƒ³è¦å®ç°çš„åŠŸèƒ½ï¼›å›¾ç‰‡è½¬ gif ä»¥åŠ gif æ’­æ”¾å™¨ã€‚è¿™äº›æ¡ˆä¾‹éƒ½å¯ä»¥åœ¨æˆ‘çš„æ•ˆæœæ¼”ç¤ºç«™ä¸­ä½“éªŒ [illustrate][gif-explorer]ã€‚

### è§†é¢‘è½¬ gif

æ€è·¯æ˜¯ `canvas` é€šè¿‡å®šæ—¶å™¨æ¥ç»˜åˆ¶ `video`ï¼Œç„¶åé€šè¿‡ worker åœ¨åå°æ‰§è¡Œç¼–ç ç®—æ³•ï¼Œå®é™…æµ‹è¯•å¯èƒ½ä¼šæœ‰ bugï¼Œç›®å‰è¿˜æœªæ‰¾åˆ°åŸå› ã€‚

è§†é¢‘è½¬ gif éœ€è¦æ§åˆ¶å¸§æ•°ï¼Œä¸ºäº†ä¿è¯æµç•…æˆ‘è®¾ç½®çš„æ˜¯æ¯ç§’ 24 å¸§ï¼Œ5 ç§’å¤§æ¦‚æœ‰ 122 å¸§ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ª 640 x 360 è§†é¢‘ç¼–ç çš„ 5 ç§’ gif æ–‡ä»¶ï¼Œè€—æ—¶ 2 åˆ† 40 ç§’ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ…¢çš„ã€‚

![gif å±•ç¤ºçš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/103cb89dd2180c85.webp)

### å›¾ç‰‡è½¬ gif

è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œåªæ˜¯ç®€å•çš„ä½¿ç”¨ `canvas` æ¥ç»˜åˆ¶å›¾åƒå¹¶ç»„åˆä¸º gif å¸§ï¼Œå‰é¢è¯´è¿‡ gif ä¹Ÿæ”¯æŒæ–‡æœ¬æ¸²æŸ“ï¼Œä¹Ÿæ˜¯å¯ä»¥å®ç°æ·»åŠ çš„ã€‚

### gif æ’­æ”¾å™¨

ä¹Ÿæ˜¯å®ç°äº†ä¸€ä¸ªç®€æ˜“çš„ gif æ’­æ”¾å™¨ï¼ŒåŒæ—¶æ·»åŠ äº†ç”¨æˆ·æ§åˆ¶æ‰©å±•ï¼Œä¸è¿‡ä¸æ”¯æŒæ¸²æŸ“æ–‡æœ¬ã€‚æ€è·¯æ˜¯è§£ç  gif çš„å›¾åƒæ•°æ®åé€šè¿‡å˜é‡ä¸€å¸§ä¸€å¸§çš„ç»˜åˆ¶åˆ° `canvas` ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå°†å…¨éƒ¨å¸§å›¾ç‰‡ä¸‹è½½ä¸ºå•ç‹¬çš„å›¾ç‰‡ã€‚å¦‚ä¸‹å›¾ï¼š

![gif æ’­æ”¾å™¨å±•ç¤ºçš„å›¾ç‰‡](https://image-gallery-blog.oss-cn-shenzhen.aliyuncs.com/5b90ec5020e61cf0.webp)

åœ¨å®ç° gif è§£ç çš„è¿‡ç¨‹ä¸­å‘ç°äº† web æ”¯æŒäº†ä¸€ä¸ªæ–°çš„ API [ImageDecoder] å¯ä»¥å¾ˆæ–¹ä¾¿çš„è§£ç å›¾åƒï¼Œå¯ä»¥åŸºäºæ­¤æ¥å®ç°æ’­æ”¾å™¨åŠŸèƒ½ã€‚

## å‚è€ƒé“¾æ¥

- [w3 è§„èŒƒ]
- [What's In A GIF]
- [LZW and GIF explained]
- [ä½ çœŸçš„äº†è§£ gif å—ï¼Ÿåˆ†æ gif æ–‡ä»¶å’Œä¸€äº›å¥‡æ€ªçš„ gif ç‰¹æ€§]
- [åº–ä¸è§£ç‰›ï¼šGIF]
- [ã€è¯»æ‡‚ Gif ç¬¬äºŒèŠ‚ã€‘LZW å‹ç¼©ç®—æ³•åœ¨ Gif ä¸­çš„åº”ç”¨ğŸ‘‘]
- [GIF Codec â€“ LZW Compression Algorithm LZWç®—æ³•]
- [å…«å‰æ ‘é¢œè‰²å‹ç¼©å›¾è§£ä»¥åŠc++å®ç°]
- [å…«å‰æ ‘ç®—æ³•--å›¾åƒé‡åŒ–æ³•]
- [å€ŸåŠ© gif.js å®ç°å‰ç«¯è§†é¢‘è½¬GIF]

[è§£é” PDF æ–‡ä»¶ï¼šä½¿ç”¨ JavaScript å’Œ Canvas æ¸²æŸ“ PDF å†…å®¹]: ../articles/what_is_pdf.mdx
[gif-explorer]: https://yuanyxh.com/illustrate/#/sequel/gif-explorer
[gifiddle]: http://ata4.github.io/gifiddle/
[gif.js]: https://github.com/jnordberg/gif.js
[NeuQuant Neural-Net Quantization Algorithm]: https://scientificgems.wordpress.com/stuff/neuquant-fast-high-quality-image-quantization/
[w3 è§„èŒƒ]: https://www.w3.org/Graphics/GIF/spec-gif89a.txt
[What's In A GIF]: http://www.matthewflickinger.com/lab/whatsinagif/
[LZW and GIF explained]: http://web.archive.org/web/20050217131148/http://www.danbbs.dk/~dino/whirlgif/lzw.html
[ä½ çœŸçš„äº†è§£ gif å—ï¼Ÿåˆ†æ gif æ–‡ä»¶å’Œä¸€äº›å¥‡æ€ªçš„ gif ç‰¹æ€§]: https://www.infoq.cn/article/fqe808mycqc0fb8u2dsx
[åº–ä¸è§£ç‰›ï¼šGIF]: https://cloud.tencent.com/developer/article/1005831
[ã€è¯»æ‡‚ Gif ç¬¬äºŒèŠ‚ã€‘LZW å‹ç¼©ç®—æ³•åœ¨ Gif ä¸­çš„åº”ç”¨ğŸ‘‘]: https://burqee.com/article/12/
[GIF Codec â€“ LZW Compression Algorithm LZWç®—æ³•]: https://succlz123.wordpress.com/2017/12/20/gif-codec-lzw-compression-algorithm/
[å…«å‰æ ‘é¢œè‰²å‹ç¼©å›¾è§£ä»¥åŠc++å®ç°]: https://zhuanlan.zhihu.com/p/220177037
[å…«å‰æ ‘ç®—æ³•--å›¾åƒé‡åŒ–æ³•]: https://blog.csdn.net/qq_34341423/article/details/119353680
[å€ŸåŠ© gif.js å®ç°å‰ç«¯è§†é¢‘è½¬GIF]: https://juejin.cn/post/7075194236684992542
[ImageDecoder]: https://developer.mozilla.org/en-US/docs/Web/API/ImageDecoder
