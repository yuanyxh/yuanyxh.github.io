---
title: ä¸ªäººåšå®¢æ­å»º - åŸºäºHexo + Next + Github
date: 2022-10-21 09:21:00
author: yuanyxh
imageUrl: http://qkc148.bvimg.com/18470/8af068b22c8eab2d.png
description: åŸºäº Hexo æ¡†æ¶ï¼Œæ­é… Next ä¸»é¢˜æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªåšå®¢ï¼Œå¹¶é…åˆ Github Pages å…è´¹æœåŠ¡ï¼Œè®©åˆ«äººä¹Ÿèƒ½è®¿é—®ä½ çš„åšå®¢ï¼
---

<Header frontmatter={frontmatter} />

<Toc toc={toc} />

## å‡†å¤‡å·¥ä½œ

åšå®¢åŸºäº [Hexo] æ­å»ºï¼Œä½¿ç”¨ä¸»é¢˜ä¸º [Next]ï¼Œ ä¸ºä¿è¯è¿‡ç¨‹é¡ºåˆ©ï¼Œéœ€è¦å…ˆåšä¸€äº›å‡†å¤‡ï¼ŒåŒ…æ‹¬éœ€è¦ä½¿ç”¨çš„ä¾èµ–åŠè´¦å·ï¼Œæ­å»ºç¯å¢ƒä¸º Windowsã€‚

### ä¾èµ–

#### Node.js

Node.js æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŸºäº Google çš„ V8 å¼•æ“ï¼›æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„æ“ä½œä¸­å¤„å¤„ç¦»ä¸å¼€ Node ä¸ NPM(Node Package Manager)ï¼Œå®‰è£…è¯·çœ‹ï¼š[Node.jså®˜æ–¹ç½‘ç«™][Node]ï¼ŒNPM ä¼šä¸ Node.js ä¸€èµ·å®‰è£…ï¼Œå®‰è£…ååœ¨ cmd çª—å£é”®å…¥ä»¥ä¸‹å‘½ä»¤éªŒè¯

```shell
node -v

npm -v
```

å‡ºç°ç‰ˆæœ¬å·åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚

#### Git

Git æ˜¯ä¸€ç§åˆ†å¸ƒå¼å¼€æºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ(VCS)ï¼Œå¯ä»¥ç†è§£ä¸ºä»“åº“ï¼Œç®¡ç†é¡¹ç›®ä»£ç ï¼Œå¯ä»¥ç®¡ç†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“ï¼Œæˆ‘ä»¬ä¸»è¦ç”¨æ¥æ¨é€åšå®¢è‡³ Github è¿œç¨‹ä»“åº“æ›´æ–°ä¸ªäººåšå®¢ç½‘ç«™ã€‚[Git å®˜ç½‘][Git]ï¼Œå…³äº Git çš„å®‰è£…è¾ƒä¸ºå¤æ‚ï¼Œæ¨èä¸€ç¯‡è¯¦ç»†è®²è§£çš„æ–‡ç« ï¼š[Git è¯¦ç»†å®‰è£…æ•™ç¨‹][Git è¯¦ç»†å®‰è£…]ã€‚

### ç›¸å…³è´¦å·æ³¨å†Œ

#### Github

è¯´åˆ°Githubï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¸ä¼šé™Œç”Ÿï¼Œå®ƒæ˜¯å…¨çƒæœ€å¤§çš„åŒæ€§äº¤å‹ç½‘ç«™:smirk:ï¼Œæä¾›äº†ä¸€ç³»åˆ—çš„å…è´¹æœåŠ¡ã€‚å‰å¾€ [Github å®˜ç½‘][Github] æ³¨å†Œè´¦å·ã€‚

#### é˜¿é‡Œäº‘

ä¸»è¦ç”¨äºè‡ªå®šä¹‰åŸŸåï¼Œè‹¥æ— éœ€æ±‚å¯æ— è§†ï¼Œ[é˜¿é‡Œäº‘å®˜ç½‘][aliyun]ï¼Œç›´æ¥ä½¿ç”¨æ”¯ä»˜å®è´¦å·æ³¨å†Œç™»å½•å³å¯ã€‚

#### LeanCloud

ç”¨äºå­˜æ”¾è¯„è®ºæ•°æ®ï¼Œè‹¥æ— éœ€æ±‚å¯æ— è§†ï¼Œ[LeanCloud å®˜ç½‘][LeanCloud]ï¼Œä¹Ÿå¯ä»¥æš‚æ—¶æ”¾ç½®ï¼Œåé¢ä»‹ç»è¯„è®ºç³»ç»Ÿæ—¶ä¸€å¹¶æ³¨å†Œã€‚

## åšå®¢æ­å»º

### æœ¬åœ°æ­å»º

Hexo æ˜¯åŸºäº Node çš„åšå®¢æ¡†æ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆé™æ€ç«™ç‚¹ï¼Œä½¿ç”¨éœ€è¦å…ˆå®‰è£…ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤

```shell
npm install hexo-cli -g   # g è¡¨ç¤º global, å…¨å±€å®‰è£…
```

å¦‚æœé•¿æ—¶é—´ä¸‹è½½ä¸ä¸‹æ¥å¯ä»¥åˆ‡æ¢ npm æºä¸ºæ·˜å®é•œåƒ

```shell
npm config set registry https://registry.npmmirror.com

npm config get registry # éªŒè¯æ˜¯å¦æˆåŠŸ
```

å®‰è£…åå°±å¯ä»¥é€šè¿‡ `hexo init åšå®¢å­˜æ”¾ç›®å½•` å‘½ä»¤åˆå§‹åŒ–åšå®¢é›å½¢

```shell
hexo init blog

cd ./blog          # è¿›å…¥ç›®å½•
```

åˆå§‹åŒ–çš„æ–‡ä»¶ç›®å½•å¤§æ¦‚å¦‚ä¸‹

```directory
|-- blog
    |-- .gitignore               # git å¿½ç•¥æ–‡ä»¶
    |-- package-lock.json
    |-- package.json             # é¡¹ç›®ä¿¡æ¯ä¸é…ç½®
    |-- _config.landscape.yml    # landscape ä¸»é¢˜é…ç½®
    |-- _config.yml              # ç«™ç‚¹é…ç½®
    |-- .github
    |   |-- dependabot.yml
    |-- scaffolds                # æ¨¡æ¿ç›®å½•
    |   |-- draft.md               # è‰ç¨¿æ¨¡æ¿
    |   |-- page.md                # é¡µé¢æ¨¡æ¿
    |   |-- post.md                # æ–‡ç« æ¨¡æ¿
    |-- source                   # èµ„æºç›®å½•
    |   |-- _posts                 # æ–‡ç« ç›®å½•
    |       |-- hello-world.md       # åˆå§‹åŒ–è‡ªå¸¦æ–‡ç« 
    |-- themes                   # æ‰€æœ‰ä¸»é¢˜å­˜æ”¾ç›®å½•
        |-- .gitkeep
```

ä¾æ¬¡é”®å…¥å‘½ä»¤

```shell
hexo new title  # åˆ›å»ºä¸€ç¯‡åä¸º title çš„æ–‡ç« ï¼Œåœ¨ _posts ç›®å½•ä¸‹

hexo g          # g è¡¨ç¤º generateï¼Œç”Ÿæˆé™æ€æ–‡ä»¶

hexo s          # s è¡¨ç¤º serverï¼Œå¼€å¯ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œé»˜è®¤ä¸º http://localhost:4000
```

è®¿é—® `http://localhost:4000`ï¼Œå³å¯çœ‹åˆ°ç½‘ç«™é›å½¢

<Image url='http://qkc148.bvimg.com/18470/0e2a1a239bc219de.png' width={1366} height={625} alt='hexo_init_blog' />

é»˜è®¤ä¸»é¢˜ä¸º landscapeï¼Œæˆ‘ä»¬å°†å…¶æ›´æ¢ä¸º [Next]ï¼Œå…ˆå¸è½½ landscape

```shell
npm un hexo-theme-landscape
```

å®‰è£… [Next]

```shell
git clone https://github.com/next-theme/hexo-theme-next themes/next
```

æ³¨æ„ï¼Œgit é…ç½®äº† ssh è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤

```shell
git clone git@github.com:next-theme/hexo-theme-next.git themes/next
```

æ­¤æ—¶ themes ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ª next ç›®å½•ï¼Œç„¶åä¿®æ”¹æ ¹ç›®å½•ç«™ç‚¹é…ç½® `_config.yml` æ–‡ä»¶

```yml
# _config.yml

#theme: landscape
theme: next
```

å¯ä»¥çœ‹åˆ°ä¸»é¢˜å·²ç»æ”¹å˜äº†

<Image url='http://qkc148.bvimg.com/18470/9a468b2b731affad.png' width={1366} height={625} alt='next ä¸»é¢˜' />

### é“¾æ¥ Github Pages

æ–°å»º Github ä»“åº“ï¼Œä»“åº“ååº”ä¸º `Github ç”¨æˆ·å.github.io`ï¼Œå¤åˆ¶ä»“åº“é“¾æ¥ï¼ˆé…ç½®äº† ssh åº”å¤åˆ¶ ssh é“¾æ¥ï¼‰ï¼Œä¿®æ”¹ç«™ç‚¹é…ç½®

```yml
# _config.yml

deploy:
  type: git
  repo: ä¸Šä¸€æ­¥å¤åˆ¶çš„é“¾æ¥
  branch: master
```

å®‰è£… git éƒ¨ç½²æ’ä»¶

```shell
npm install hexo-deployer-git --save
```

é”®å…¥ä»¥ä¸‹å‘½ä»¤

```shell
hexo clean  # æ¸…é™¤ç¼“å­˜

hexo g

hexo d      # dè¡¨ç¤ºdeployï¼Œéƒ¨ç½²è‡³ Github
```

ç„¶åè®¿é—® `Github ç”¨æˆ·å.github.io` å³å¯

### è‡ªå®šä¹‰åŸŸå

é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ªåŸŸåï¼Œæˆ‘ç”¨çš„æ˜¯é˜¿é‡Œäº‘ï¼Œæ‰€ä»¥æ¼”ç¤ºä¹Ÿæ˜¯åŸºäºé˜¿é‡Œäº‘å®˜ç½‘æ“ä½œï¼Œå…ˆç™»å½•é˜¿é‡Œäº‘ï¼Œæ‰¾åˆ°åŸŸåè§£æï¼Œç‚¹æ·»åŠ è®¾ç½®ï¼Œæ·»åŠ å¦‚ä¸‹

<Image url='http://qkc148.bvimg.com/18470/46026a0a9acbe2ad.png' width={1115} height={211} alt='è§£æ DNS' />

å…¶ä¸­ç¬¬ä¸€é¡¹è®°å½•å€¼éœ€è¦æ›¿æ¢ä¸º `Github ç”¨æˆ·å.github.io`ï¼Œç¬¬äºŒé¡¹çºªå½•å€¼å¯ä»¥åœ¨ cmd çª—å£ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¾—çŸ¥

```shell
ping ç”¨æˆ·å.github.io
```

ç¬¬ä¸‰é¡¹è®°å½•å€¼æ˜¯ Github å®˜æ–¹çš„ IPï¼Œæœ‰è¢«æ›´æ¢çš„å¯èƒ½ï¼Œå¯ä»¥å‰å¾€ [Github å®˜æ–¹æ–‡æ¡£][Github Docs] å¤„æŸ¥çœ‹

<Image url='http://qkc148.bvimg.com/18470/fb8d6ba8afa651bf.png' width={1077} height={495} alt='Github å®˜æ–¹æ–‡æ¡£' />

è®¾ç½®è§£æåå‰å¾€ ä»“åº“è®¾ç½®ä¸ºè‡ªå·±çš„åŸŸåï¼šSettings -> Pages

<Image url='http://qkc148.bvimg.com/18470/8b4afa23cced642e.png' width={1092} height={552} alt='è®¾ç½®åŸŸå' />

åœ¨ `source` ç›®å½•ä¸‹æ–°å»º `CNAME` æ–‡ä»¶ï¼Œè¾“å…¥è‡ªå·±çš„åŸŸåï¼ˆä¸è¦å¸¦ wwwï¼‰åä¿å­˜ï¼Œå†æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤

```shell
hexo clean

hexo g

hexo d
```

å¦‚æœæ¯æ¬¡æ‰§è¡Œå«Œéº»çƒ¦ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `run.bat` æ–‡ä»¶ï¼Œå†™å…¥ `hexo clean && hexo g && hexo d`ï¼Œä¿å­˜å³å¯ï¼Œä»¥åéœ€è¦å‘å¸ƒåŒå‡»æ­¤æ–‡ä»¶å°±ä¼šè‡ªåŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œæƒ³è¦åœ¨æœ¬åœ°è¿è¡Œå¯ä»¥å°† `d` æ¢æˆ `s`ã€‚

## Hexo é…ç½®

### ç½‘ç«™æ ‡é¢˜ã€å…³é”®å­—ç­‰

ç«™ç‚¹é…ç½®ï¼Œä¿®æ”¹æ ¹ç›®å½• `_config.yml`ã€‚

```yml
#_config.yml

# Site
title: yuanyxh - å­¦ä¹ ä¸æ²‰æ·€ # ç«™ç‚¹æ ‡é¢˜
subtitle: å­¦ä»¥è‡´ç”¨ # ç«™ç‚¹äºŒçº§æ ‡é¢˜
description: è¯»ä¸‡å·ä¹¦ï¼Œè¡Œä¸‡é‡Œè·¯ # ç«™ç‚¹æè¿°
keywords: åšå®¢, web, å‰ç«¯, JavaScript, React, Vue, Node, Java, C/C++, Frida, Xposed # ç«™ç‚¹å…³é”®è¯
author: yuanyxh # ä½œè€…
language: zh-CN # è¯­è¨€
timezone: Asia/Shanghai # æ—¶åŒº
```

ä»¥ä¸Šå†…å®¹å»ºè®®è®¤çœŸå¡«å†™ï¼Œä¼šå½±å“ `SEO`ã€‚

### æ·»åŠ é»‘æš—æ¨¡å¼

[Next] é»˜è®¤æ”¯æŒé»‘æš—æ¨¡å¼ï¼Œä½†æ— æ³•æ‰‹åŠ¨åˆ‡æ¢ï¼Œä½¿ç”¨ [drakmode.js][Drakmode.js] æ‰‹åŠ¨æ·»åŠ æ”¯æŒï¼Œä¸»é¢˜é…ç½®

```yml
# _config.next.yml

vendors:
  # cdn å¼•ç”¨æ’ä»¶
  darkmode_js: https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js

darkmode_js:
  enable: true # å¯ç”¨æ’ä»¶
```

åœ¨ `/themes/next/layout/_scripts/vendors.njk` ä¸­æ·»åŠ å†…å®¹

```html
# vendors.njk

{# Customize darkmode.js - Declaration #}
{%- if theme.darkmode_js.enable %}
  <script src="{{ theme.vendors.darkmode_js }}"></script>
{%- endif %}

{# Customize darkmode.js - Invokation #}
{%- if theme.darkmode_js.enable %}
<script>
var options = {
  bottom: '64px', // default: '32px'
  right: 'unset', // default: '32px'
  left: '32px', // default: 'unset'
  time: '0.5s', // default: '0.3s'
  mixColor: 'transparent', // default: '#fff'
  backgroundColor: 'transparent',  // default: '#fff'
  buttonColorDark: '#100f2c',  // default: '#100f2c'
  buttonColorLight: '#fff', // default: '#fff'
  saveInCookies: true, // default: true,
  label: 'ğŸŒ“', // default: ''
  autoMatchOsTheme: true // default: true
}
const darkmode = new Darkmode(options);
darkmode.showWidget();
</script>
{%- endif %}
```

æ­¤æ—¶å¯ä»¥æ‰‹åŠ¨åˆ‡æ¢æ¨¡å¼ï¼Œä½†æ ·å¼éƒ¨åˆ†è¿˜éœ€è¦æ›´æ”¹ï¼Œå½“åˆ‡æ¢åˆ°é»‘æš—æ¨¡å¼æ—¶ï¼Œ`drakmode.js` ä¼šåœ¨ `body` å…ƒç´ ä¸­æ·»åŠ  `darkmode--activated` ç±»ï¼Œæˆ‘ä»¬æ–°å»º `themes/next/source/css/_custom/drakmode.styl` æ ·å¼æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹

```css
# drakmode.styl

.darkmode--activated {
  --body-bg-color: $body-bg-color-dark;
  --content-bg-color: $content-bg-color-dark;
  --card-bg-color: $card-bg-color-dark;
  --text-color: $text-color-dark;
  --blockquote-color: $blockquote-color-dark;
  --link-color: $link-color-dark;
  --link-hover-color: $link-hover-color-dark;
  --brand-color: $brand-color-dark;
  --brand-hover-color: $brand-hover-color-dark;
  --table-row-odd-bg-color: $table-row-odd-bg-color-dark;
  --table-row-hover-bg-color: $table-row-hover-bg-color-dark;
  --menu-item-bg-color: $menu-item-bg-color-dark;

  --btn-default-bg: $btn-default-bg-dark;
  --btn-default-color: $btn-default-color-dark;
  --btn-default-border-color: $btn-default-border-color-dark;
  --btn-default-hover-bg: $btn-default-hover-bg-dark;
  --btn-default-hover-color: $btn-default-hover-color-dark;
  --btn-default-hover-border-color: $btn-default-hover-border-color-dark;

  --highlight-background: $highlight-background-dark;
  --highlight-foreground: $highlight-foreground-dark;
  --highlight-gutter-background: $highlight-gutter-background-dark;
  --highlight-gutter-foreground: $highlight-gutter-foreground-dark;

  img {
    opacity: .75;
    &:hover {
      opacity: .9;
    }
  }

  code {
   color: #69dbdc;
   background: transparent;
 }
}
```

ç„¶ååœ¨ `themes/next/source/css/main.styl` ä¸­æ·»åŠ å¼•ç”¨

```css
# main.styl

@import '_custom/darkmode.styl';
```

### æ›¿æ¢ Markdown æ¸²æŸ“å¼•æ“

[Hexo] é»˜è®¤çš„æ¸²æŸ“å¼•æ“ç¼ºå°‘äº†å¾ˆå¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯¹ä»–è¿›è¡Œæ›¿æ¢ï¼Œå…ˆå¸è½½é»˜è®¤æ¸²æŸ“å¼•æ“

```shell
npm un hexo-renderer-marked --save
```

å®‰è£… `hexo-renderer-markdown-it` æ’ä»¶

```shell
npm i hexo-renderer-markdown-it --save
```

ç«™ç‚¹é…ç½®æ·»åŠ å†…å®¹

```yml
# _config.yml

markdown:
  preset: 'default'
  render:
    html: true
    xhtmlOut: false
    langPrefix: 'language-'
    breaks: true
    linkify: true
    typographer: true
    quotes: 'â€œâ€â€˜â€™'
  enable_rules:
  disable_rules:
  plugins:
    - markdown-it-abbr
    - markdown-it-cjk-breaks
    - markdown-it-deflist
    - markdown-it-emoji
    - markdown-it-footnote
    - markdown-it-ins
    - markdown-it-mark
    - markdown-it-sub
    - markdown-it-sup
    - markdown-it-checkbox
    - markdown-it-imsize
    - markdown-it-expandable
    - name: markdown-it-container
      options: success
    - name: markdown-it-container
      options: tips
    - name: markdown-it-container
      options: warning
    - name: markdown-it-container
      options: danger
  anchors:
    level: 2
    collisionSuffix: ''
    permalink: false
    permalinkClass: 'header-anchor'
    permalinkSide: 'left'
    permalinkSymbol: 'Â¶'
    case: 0
    separator: '-'
```

å®‰è£…ä»¥ä¸‹æ’ä»¶

```shell
npm i markdown-it-checkbox

npm i markdown-it-imsize

npm i markdown-it-expandable
```

## Next é…ç½®

é»˜è®¤æä¾›çš„ [Next] åªæä¾›äº†éƒ¨åˆ†åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹é»˜è®¤é…ç½®æ¥è¿›è¡Œæ‰©å±•ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `_config.next.yml` ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­çš„é…ç½®ä¼˜å…ˆäº next ä¸»é¢˜ä¸­çš„ `_config.yml`ã€‚

### æ›¿æ¢å¸ƒå±€

next é»˜è®¤ä½¿ç”¨çš„å¸ƒå±€ä¸º Museï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Mistï¼Œ`#` ä»£è¡¨æ³¨é‡Šã€‚å°†å†…å®¹å¤åˆ¶ç²˜è´´è‡³ `_config.next.yml`ã€‚

```yml
# _config.next.yml

# Schemes
#scheme: Muse
scheme: Mist
#scheme: Pisces
#scheme: Gemini
```

### èœå•é¡¹

å¯ä»¥æŒ‰éœ€æ·»åŠ ä¿®æ”¹ï¼Œä¸éœ€è¦æ˜¾ç¤ºçš„èœå•é¡¹æ³¨é‡Šå³å¯ã€‚

```yml
#_config.next.yml

menu:
  home: / || fa fa-home # é¦–é¡µ
  tags: /tags/ || fa fa-tags # æ ‡ç­¾
  categories: /categories/ || fa fa-th # åˆ†ç±»
  archives: /archives/ || fa fa-archive # å½’æ¡£
  schedule: /schedule/ || fa fa-calendar # æ—¥ç¨‹è¡¨
  sitemap: /sitemap.xml || fa fa-sitemap # ç«™ç‚¹åœ°å›¾
  about: /about/ || fa fa-user # å…³äº
  commonweal: /404/ || fa fa-heartbeat # 404

# Enable / Disable menu icons / item badges.
menu_settings:
  icons: true # æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡
  badges: false # æ˜¯å¦æ˜¾ç¤ºå³ä¸Šè§’æ–‡ç« æ•°é‡
```

æ­¤æ—¶æˆ‘ä»¬ç‚¹å‡»èœå•é¡¹ä¼šå‘ç°é™¤é¦–é¡µå’Œå½’æ¡£å¤–å…¶ä»–èœå•é¡¹éƒ½ä¼šä¸¢å¤±é¡µé¢ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡åˆ›å»ºå¯¹åº”çš„é¡µé¢ï¼Œä½¿ç”¨ `hexo new page é¡µé¢å`

```shell
hexo new page tags        # åˆ›å»ºæ ‡ç­¾é¡µ

hexo new page categories  # åˆ›å»ºåˆ†ç±»é¡µ

hexo new page about       # åˆ›å»ºå…³äºé¡µ
```

æ­¤æ—¶ source ä¼šå¤šå‡ºå‡ ä¸ªæ–‡ä»¶å¤¹ä¸ä¹‹å¯¹åº”ã€‚

æ—¢ç„¶æœ‰æ ‡ç­¾å’Œåˆ†ç±»ï¼Œé‚£æˆ‘ä»¬è¦æ€ä¹ˆå°†æ–‡ç« æ ‡è®°å’Œå½’ç±»å‘¢ï¼Œä»¥åˆ†ç±»ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ‰¾åˆ° `source/categories/` ä¸‹çš„ `index.md`ï¼Œä¿®æ”¹å†…å®¹ä¸º

```yml
# source/categories/index.md
---
type: categories
title: æ–‡ç« åˆ†ç±»
date: 2022-10-19 13:30:10
---
```

å¯ä»¥çœ‹åˆ°å°±æ˜¯åŠ äº†ä¸€ä¸ª type å­—æ®µæŒ‡æ˜è¿™ä¸ª Markdown æ–‡ä»¶ç”¨æ¥åˆ†ç±»ï¼Œè¿™æ ·æˆ‘ä»¬çš„æ–‡ç« æƒ³è¦åˆ†ç±»æ—¶å¯ä»¥è¿™æ ·

```yml
# source/_posts/ä¸ªäººåšå®¢æ­å»º - åŸºäºHexo + Next + Github.md
---
title: ä¸ªäººåšå®¢æ­å»º - åŸºäºHexo + Next + Github
categories:
  - ç«™ç‚¹å»ºè®¾ # æŒ‡æ˜åˆ†ç±»
date: 2022-10-21 09:21:00
description: åŸºäº Hexo æ¡†æ¶ï¼Œæ­é… Next ä¸»é¢˜æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªåšå®¢ï¼Œå¹¶é…åˆ Github Pages å…è´¹æœåŠ¡ï¼Œè®©åˆ«äººä¹Ÿèƒ½è®¿é—®ä½ çš„åšå®¢ï¼ # æ·»åŠ æ–‡ç« æè¿°
---
```

### æ·»åŠ æœ¬åœ°æœç´¢

å®‰è£…æœç´¢æ’ä»¶

```shell
npm install hexo-generator-search
```

åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹

```yml
# _config.yml

search:
  path: search.xml # æŸ¥æ‰¾è·¯å¾„ï¼Œsearch.xml æ˜¯æ’ä»¶é»˜è®¤ç”Ÿæˆçš„æ£€ç´¢æ–‡ä»¶
  field: post # æŸ¥æ‰¾ç±»å‹
  content: true # æ˜¯å¦å¼€å¯æŸ¥æ‰¾æ–‡ç« å†…å®¹
  template: ./search.xml
```

å¼€å¯ä¸»é¢˜çš„æœ¬åœ°æœç´¢ï¼Œæ·»åŠ å†…å®¹

```yml
# _config.next.yml

local_search:
  enable: true
  # If auto, trigger search by changing input.
  # If manual, trigger search by pressing enter key or search button.
  trigger: auto
  # Show top n results per article, show all results by setting to -1
  top_n_per_article: 1
  # Unescape html strings to the readable one.
  unescape: false
  # Preload the search data when the page loads.
  preload: false
```

### ä¿®æ”¹ç½‘ç«™å›¾æ ‡

ä»¥ä¸‹é…ç½®ä¸ç”¨æ·»åŠ ï¼Œåœ¨ `theme/next/source/images` ç›®å½•ä¸‹ï¼Œå°†ä½ æƒ³è¦ä½¿ç”¨çš„å›¾æ ‡å¤åˆ¶è¿›å»å¹¶é‡å‘½åä¸º `favicon-16x16-next.png` å’Œ `favicon-32x32-next.png`

```yml
favicon:
  small: /images/favicon-16x16-next.png
  medium: /images/favicon-32x32-next.png
  apple_touch_icon: /images/apple-touch-icon-next.png
  safari_pinned_tab: /images/logo.svg
  #android_manifest: /manifest.json
```

### æ·»åŠ ç‰ˆæƒ

```yml
# _config.next.yml

creative_commons:
  license: by-nc-sa # ä½¿ç”¨çš„åè®®
  # Available values: big | small
  size: small # å¤§å°
  sidebar: false # ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤º
  post: true # æ–‡ç« æ˜¯å¦æ˜¾ç¤º
  language: zh-CN # è¯­è¨€
```

é…ç½®åå¦‚ä¸‹æ‰€ç¤º

<Image url='http://qkc148.bvimg.com/18470/e82c64e56b76f575.png' width={936} height={211} alt='æ·»åŠ ç‰ˆæƒ' />

### é…ç½®ä¾§è¾¹æ 

```yml
# _config.next.yml

sidebar:
  position: right # ä¾§è¾¹æ ä½ç½®
  display: hide # ä¾§è¾¹æ é»˜è®¤éšè—
  padding: 18
  offset: 12

avatar:
  url: /images/Only_Me_Edit.png # å¤´åƒè·¯å¾„
  rounded: true # æ˜¯å¦æ˜¾ç¤ºåœ†å½¢å¤´åƒ
  rotated: false # é¼ æ ‡ç§»å…¥æ˜¯å¦æ—‹è½¬

site_state: true # æ˜¯å¦æ˜¾ç¤ºæ—¥å¿—ã€åˆ†ç±»ç­‰

# è®¾ç½®ç¤¾äº¤é“¾æ¥ï¼Œå¯æ·»åŠ åˆ é™¤
social:
  GitHub: https://github.com/yuanyxh || fab fa-github
  QQ: http://wpa.qq.com/msgrd?v=3&uin=725441272&site=qq&menu=yes || fa-brands fa-qq
  æ˜é‡‘: https://juejin.cn/user/2881148117060749 || fa-solid fa-layer-group
  #E-Mail: mailto:yourname@gmail.com || fa fa-envelope
  #Weibo: https://weibo.com/yourname || fab fa-weibo
  #Google: https://plus.google.com/yourname || fab fa-google
  #Twitter: https://twitter.com/yourname || fab fa-twitter
  #FB Page: https://www.facebook.com/yourname || fab fa-facebook
  #StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow
  #YouTube: https://youtube.com/yourname || fab fa-youtube
  #Instagram: https://instagram.com/yourname || fab fa-instagram
  #Skype: skype:yourname?call|chat || fab fa-skype

social_icons:
  enable: true # æ˜¯å¦å¯ç”¨ç¤¾äº¤é“¾æ¥å¯¹åº”å›¾æ ‡
  icons_only: false # æ˜¯å¦åªæ˜¾ç¤ºå›¾æ ‡
  transition: false
```

### æ˜¾ç¤ºæ–‡ç« å­—æ•°ä¸é˜…è¯»æ—¶é•¿

å®‰è£… `hexo-symbols-count-time` æ’ä»¶

```shell
npm install hexo-symbols-count-time
```

ç«™ç‚¹é…ç½®

```yml
# _config.yml

symbols_count_time:
  symbols: true # å¯ç”¨å­—æ•°ç»Ÿè®¡
  time: true # å¯ç”¨é˜…è¯»æ—¶é•¿ä¼°è®¡
  total_symbols: true # å­—ç¬¦æ€»æ•°
  total_time: true # æ€»æ—¶é•¿
  exclude_codeblock: false # æ˜¯å¦åŒ…å«ä»£ç å—
  awl: 4
  wpm: 275
  suffix: 'mins.'
```

ä¸»é¢˜é…ç½®

```yml
# _config.next.yml

symbols_count_time:
  separated_meta: true
  item_text_total: false
```

### æ–‡ç« æ·»åŠ æ—¶æ•ˆæ€§æç¤º

æ ¹ç›®å½•æ–°å»º `/scripts/injector.js` æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹

```javascript
//æ³¨å…¥æ–‡ç« è¿‡æœŸæç¤º
hexo.extend.injector.register(
  'body_end',
  `<script src="/js/outdate.js"></script>`,
  'post'
);
```

æ–°å»º `/source/js/outdate.js` æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹

```javascript
(function () {
  //ä¸åŒçš„æ—¥æœŸæ˜¾ç¤ºä¸åŒçš„æ ·å¼ï¼Œ200 å¤©ä¸ºé»„è‰²æç¤ºï¼Œ400å¤©ä¸ºçº¢è‰²æç¤ºï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ã€‚
  let warningDay = 200;
  let errorDay = 400;
  // ç¡®ä¿èƒ½å¤Ÿè·å–åˆ°æ–‡ç« æ—¶é—´ä»¥åŠåœ¨æ–‡ç« è¯¦æƒ…é¡µ
  let times = document.getElementsByTagName('time');
  if (times.length === 0) {
    return;
  }
  let posts = document.getElementsByClassName('post-body');
  if (posts.length === 0) {
    return;
  }

  // è·å–ç³»ç»Ÿå½“å‰çš„æ—¶é—´
  let pubTime = new Date(times[0].dateTime); /* æ–‡ç« å‘å¸ƒæ—¶é—´æˆ³ */
  let now = Date.now(); /* å½“å‰æ—¶é—´æˆ³ */
  let interval = parseInt(now - pubTime);
  let days = parseInt(interval / 86400000);
  /* å‘å¸ƒæ—¶é—´è¶…è¿‡æŒ‡å®šæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ */
  //note warning ä»¥åŠ note danger æ˜¯ Next ä¸»é¢˜çš„è‡ªå®šä¹‰æ¨¡æ¿è¯­æ³•ï¼Œå¦‚æœä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œè¯·è‡ªè¡Œæ›´æ”¹æ ·å¼ä»¥è¾¾åˆ°æœ€ä½³æ˜¾ç¤ºæ•ˆæœ
  if (
    interval > warningDay * 3600 * 24 * 1000 &&
    interval < errorDay * 3600 * 24 * 1000
  ) {
    posts[0].innerHTML =
      '<div class="note warning">' +
      '<h5>æ–‡ç« æ—¶æ•ˆæ€§æç¤º</h5><p>è¿™æ˜¯ä¸€ç¯‡å‘å¸ƒäº ' +
      days +
      ' å¤©å‰çš„æ–‡ç« ï¼Œéƒ¨åˆ†ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜ï¼Œè¯·æ³¨æ„ç”„åˆ«ã€‚</p>' +
      '</div>' +
      posts[0].innerHTML;
  } else if (interval >= errorDay * 3600 * 24 * 1000) {
    posts[0].innerHTML =
      '<div class="note danger">' +
      '<h5>æ–‡ç« æ—¶æ•ˆæ€§æç¤º</h5><p>è¿™æ˜¯ä¸€ç¯‡å‘å¸ƒäº ' +
      days +
      ' å¤©å‰çš„æ–‡ç« ï¼Œéƒ¨åˆ†ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜ï¼Œè¯·æ³¨æ„ç”„åˆ«ã€‚</p>' +
      '</div>' +
      posts[0].innerHTML;
  }
})();
```

æ–‡ç« è¶…è¿‡200å¤©åˆ™æ˜¾ç¤ºè¿‡æ—¶æç¤º

### ä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½

ä¸»é¢˜é…ç½®æ·»åŠ 

```yml
# _config.next.yml

codeblock:
  copy_button:
    enable: true
    # Available values: default | flat | mac
    style: mac
```

### æ·»åŠ è¯„è®ºç³»ç»Ÿ

[Hexoåšå®¢è¿›é˜¶ï¼šä¸º Next ä¸»é¢˜æ·»åŠ  Waline è¯„è®ºç³»ç»Ÿ][11]
[Waline å®˜æ–¹æ–‡æ¡£][Waline]

æ ¹æ® [LeanCloud] å®˜æ–¹æè¿°ï¼Œç›®å‰å›½é™…ç‰ˆå·²ä¸æ”¯æŒå›½å†…è®¿é—®ï¼Œå…·ä½“çœ‹ [LeanCloud å›½é™…ç‰ˆå…±äº«åŸŸåä¸å†å‘ä¸­å›½å¤§é™†æä¾›æœåŠ¡][LeanCloud CN]

è¿™æ„å‘³ç€å›½å†…ç½‘ç»œæ— æ³•è·å–å¹¶å‘å¸ƒè¯„è®ºæ•°æ®ï¼Œæœ¬ç«™åç»­å¯èƒ½ä¼šæ›¿æ¢è¯„è®ºç³»ç»Ÿï¼Œå¦‚éœ€è¦å…¶ä»–è¯„è®ºç³»ç»Ÿå¯çœ‹ [Next æ–‡æ¡£ - è¯„è®ºç³»ç»Ÿ][Next Comments]

## ç½‘ç«™ SEO ä¼˜åŒ–

SEOï¼Œå³æœç´¢å¼•æ“ä¼˜åŒ–ï¼Œè¿™é‡Œçš„ SEO ä¼˜åŒ–ä¸»è¦é’ˆå¯¹é¡¹ç›®çš„ä½“ç§¯ï¼ŒåŠ é€Ÿç«™ç‚¹é¦–å±åŠ è½½æ—¶é—´ï¼Œå®é™…è¿˜è¦çœ‹ç«™ç‚¹å†…å®¹æ˜¯å¦ä¼˜è´¨ï¼Œæœ‰æ•ˆç”¨æˆ·è®¿é—®é‡ç­‰ã€‚

### å‹ç¼©ä»£ç 

å®‰è£…æ’ä»¶

```shell
npm install hexo-neat --save
```

ç«™ç‚¹é…ç½®æ·»åŠ 

```yml
# _config.yml

# å¼€å¯å‹ç¼©
neat_enable: true
neat_html:
  enable: true
  exclude:
neat_css:
  enable: true
  exclude:
    - '**/*.min.css'
neat_js:
  enable: true
  mangle: true
  output:
  compress:
  exclude:
    - '**/*.min.js'
    - '**/index.js'
```

### ç«™ç‚¹æ”¶å½•

[å¦‚ä½•è®©æœç´¢å¼•æ“æ”¶å½•æˆ‘çš„ç«™ç‚¹][9]
[Next SEO][10]

### ç½‘ç«™æ€§èƒ½æµ‹è¯•

ä¸€ä¸ªå¥½çš„ç½‘ç«™ï¼Œæ€§èƒ½æ˜¯å¿…é¡»è¦å¥½çš„ï¼Œå¦‚æœç”¨æˆ·è®¿é—®ä½ çš„ç½‘ç«™è¦ç­‰å¾ˆä¹…ï¼Œæˆ–è€…ç½‘ç«™é¡µé¢å¡é¡¿ï¼Œå°±ä¼šé™ä½ç”¨æˆ·çš„æ»¡æ„åº¦ï¼Œä»è€Œæµå¤±å¤§é‡ç”¨æˆ·ï¼Œè¿™é‡Œæ¨èä¸€ä¸ªæ€§èƒ½æµ‹è¯•ç½‘ç«™ï¼Œä¸“é—¨ç”¨äºæµ‹è¯•ç½‘ç«™æ€§èƒ½ï¼Œå¹¶ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

[PageSpeed Insights]

## å‚è€ƒæ–‡ç« 

- [GitHub+Hexo æ­å»ºä¸ªäººç½‘ç«™è¯¦ç»†æ•™ç¨‹][1]
- [hexoåšå®¢ç«™ç‚¹sitemapçš„ä½¿ç”¨][2]
- [Hexo Next ä¸»é¢˜è¿›é˜¶è®¾ç½®][3]
- [Hexo Next 8.x ä¸»é¢˜æ·»åŠ å¯åˆ‡æ¢çš„æš—é»‘æ¨¡å¼][4]
- [Hexoæ­å»ºçš„GitHubåšå®¢ä¹‹ä¼˜åŒ–å¤§å…¨][5]
- [Hexoé€‰æ‹©æ›´é«˜çº§çš„Markdownæ¸²æŸ“å™¨][6]
- [Hexo-NexT åŠ è½½æ€§èƒ½ä¼˜åŒ–][7]
- [Hexoåšå®¢è¿›é˜¶ï¼šä¸º Next ä¸»é¢˜çš„ Hexo åšå®¢å†…å®¹æ·»åŠ æ–‡ç« è¿‡æœŸ/æ—¶æ•ˆæç¤º][8]
- [Hexo + Next + Pages ä¸ªäººåšå®¢ - SEOä¼˜åŒ–][9]
- [Hexoåšå®¢è¿›é˜¶ï¼šä¸º Next ä¸»é¢˜æ·»åŠ  Waline è¯„è®ºç³»ç»Ÿ][11]

[Node]: https://nodejs.org/zh-cn/
[Git]: https://git-scm.com/
[Git è¯¦ç»†å®‰è£…]: https://blog.csdn.net/mukes/article/details/115693833
[Github]: https://github.com/
[aliyun]: https://www.aliyun.com/product/ecs
[LeanCloud]: https://console.leancloud.app/apps
[Hexo]: https://hexo.io/zh-cn/
[Next]: https://theme-next.js.org/
[Github Docs]: https://docs.github.com/cn/pages
[Drakmode.js]: https://github.com/sandoche/Darkmode.js
[1]: https://zhuanlan.zhihu.com/p/26625249
[2]: https://eericzeng.github.io/2019/07/14/hexo%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9sitemap%E7%9A%84%E4%BD%BF%E7%94%A8/
[3]: https://www.qtmuniao.com/2019/10/16/hexo-theme-landscaping/
[4]: https://www.techgrow.cn/posts/abf4aee1.html
[5]: https://zhuanlan.zhihu.com/p/33616481
[6]: https://blog.csdn.net/qq_42951560/article/details/123596899
[7]: https://tding.top/archives/7e5b094d.html
[8]: https://qianfanguojin.top/2022/09/07/Hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%9A%E4%B8%BA-Next-%E4%B8%BB%E9%A2%98%E7%9A%84-Hexo-%E5%8D%9A%E5%AE%A2%E5%86%85%E5%AE%B9%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E8%BF%87%E6%9C%9F-%E6%97%B6%E6%95%88%E6%8F%90%E7%A4%BA/
[9]: https://www.linjiexin.com/post/blog-seo/
[10]: https://theme-next.js.org/docs/theme-settings/seo.html
[11]: https://qianfanguojin.top/2022/01/20/Hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%9A%E4%B8%BA-Next-%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0-Waline-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/
[PageSpeed Insights]: https://pagespeed.web.dev/?utm_source=psi&utm_medium=redirect
[Waline]: https://waline.js.org/guide/get-started.html
[LeanCloud CN]: https://forum.leancloud.cn/t/2022-8/25408
[Next Comments]: https://theme-next.js.org/docs/third-party-services/comments
